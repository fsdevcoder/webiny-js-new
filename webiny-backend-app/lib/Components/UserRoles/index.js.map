{"version":3,"sources":["../../../src/Components/UserRoles/index.js"],"names":["UserRoles","props","state","roles","bindMethods","Api","Endpoint","api","get","_perPage","_sort","then","isMounted","setState","filter","apiResponse","getData","r","slug","index","role","enabled","value","push","splice","onChange","Ui","Component","defaultProps","noop","renderer","List","Switch","Link","width","data","checkedIndex","findIndex","id","i18n","name","createComponent","modules"],"mappings":"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","file":"index.js","sourcesContent":["import React from 'react';\nimport _ from 'lodash';\nimport {Webiny} from 'webiny-client';\n\n/**\n * @i18n.namespace Webiny.Backend.UserRoles\n */\nclass UserRoles extends Webiny.Ui.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            roles: []\n        };\n\n        this.bindMethods('onChange');\n    }\n\n    componentWillMount() {\n        super.componentWillMount();\n        new Webiny.Api.Endpoint(this.props.api).get('/', {_perPage: 1000, _sort: 'name'}).then(apiResponse => {\n            if (this.isMounted()) {\n                this.setState({roles: _.filter(apiResponse.getData('list'), r => r.slug !== 'public')});\n            }\n        });\n    }\n\n    onChange(index, role, enabled) {\n        const value = this.props.value || [];\n        if (enabled) {\n            value.push(role);\n        } else {\n            value.splice(index, 1);\n        }\n        this.props.onChange(value);\n    }\n}\n\nUserRoles.defaultProps = {\n    api: '/entities/webiny/user-roles',\n    value: [],\n    onChange: _.noop,\n    renderer() {\n        const {List, Switch, Link} = this.props;\n        return (\n            <List.Table data={this.state.roles}>\n                <List.Table.Row>\n                    <List.Table.Field style={{width: 140}} align=\"center\">\n                        {({data}) => {\n                            const checkedIndex = _.findIndex(this.props.value, {id: data.id});\n                            return (\n                                <Switch value={checkedIndex > -1} onChange={enabled => this.onChange(checkedIndex, data, enabled)}/>\n                            );\n                        }}\n                    </List.Table.Field>\n                    <List.Table.Field label={this.i18n('Role')}>\n                        {({data}) => (\n                            <span>\n                                <Link route=\"UserRoles.Edit\" params={{id: data.id}}><strong>{data.name}</strong></Link><br/>{data.slug}\n                            </span>\n                        )}\n                    </List.Table.Field>\n                    <List.Table.Field label={this.i18n('Description')} name=\"description\"/>\n                </List.Table.Row>\n            </List.Table>\n        );\n    }\n};\n\nexport default Webiny.createComponent(UserRoles, {modules: ['List', 'Switch', 'Link']});"]}