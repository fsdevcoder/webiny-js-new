{"version":3,"sources":["../../../src/Components/UserPermissions/index.js"],"names":["UserPermissions","props","state","permissions","Api","Endpoint","api","get","_perPage","_sort","then","setState","apiResponse","getData","index","permission","enabled","value","push","splice","onChange","Ui","Component","defaultProps","noop","renderer","List","Switch","Link","width","data","checkedIndex","findIndex","id","i18n","name","slug","createComponent","modules"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;AACA;;;;AACA;;;;AAEA;;;IAGMA,e;;;AACF,6BAAYC,KAAZ,EAAmB;AAAA;;AAAA,oJACTA,KADS;;AAGf,cAAKC,KAAL,GAAa;AACTC,yBAAa;AADJ,SAAb;AAHe;AAMlB;;;;6CAEoB;AAAA;;AACjB;AACA,gBAAI,qBAAOC,GAAP,CAAWC,QAAf,CAAwB,KAAKJ,KAAL,CAAWK,GAAnC,EAAwCC,GAAxC,CAA4C,GAA5C,EAAiD,EAACC,UAAU,IAAX,EAAiBC,OAAO,MAAxB,EAAjD,EAAkFC,IAAlF,CAAuF,uBAAe;AAClG,uBAAKC,QAAL,CAAc,EAACR,aAAaS,YAAYC,OAAZ,CAAoB,MAApB,CAAd,EAAd;AACH,aAFD;AAGH;;;iCAEQC,K,EAAOC,U,EAAYC,O,EAAS;AACjC,gBAAMC,QAAQ,KAAKhB,KAAL,CAAWgB,KAAX,IAAoB,EAAlC;AACA,gBAAID,OAAJ,EAAa;AACTC,sBAAMC,IAAN,CAAWH,UAAX;AACH,aAFD,MAEO;AACHE,sBAAME,MAAN,CAAaL,KAAb,EAAoB,CAApB;AACH;AACD,iBAAKb,KAAL,CAAWmB,QAAX,CAAoBH,KAApB;AACH;;;EAxByB,qBAAOI,EAAP,CAAUC,S;;AA2BxCtB,gBAAgBuB,YAAhB,GAA+B;AAC3BjB,SAAK,mCADsB;AAE3BW,WAAO,EAFoB;AAG3BG,cAAU,iBAAEI,IAHe;AAI3BC,YAJ2B,sBAIhB;AAAA;;AAAA,qBACsB,KAAKxB,KAD3B;AAAA,YACAyB,IADA,UACAA,IADA;AAAA,YACMC,MADN,UACMA,MADN;AAAA,YACcC,IADd,UACcA,IADd;;AAEP,eACI;AAAC,gBAAD,CAAM,KAAN;AAAA,cAAY,MAAM,KAAK1B,KAAL,CAAWC,WAA7B;AACI;AAAC,oBAAD,CAAM,KAAN,CAAY,GAAZ;AAAA;AACI;AAAC,wBAAD,CAAM,KAAN,CAAY,KAAZ;AAAA,sBAAkB,OAAO,EAAC0B,OAAO,GAAR,EAAzB;AACK,oCAAY;AAAA,4BAAVC,IAAU,QAAVA,IAAU;;AACT,4BAAMC,eAAe,iBAAEC,SAAF,CAAY,OAAK/B,KAAL,CAAWgB,KAAvB,EAA8B,EAACgB,IAAIH,KAAKG,EAAV,EAA9B,CAArB;AACA,+BACI,8BAAC,MAAD,IAAQ,OAAOF,eAAe,CAAC,CAA/B,EAAkC,UAAU;AAAA,uCAAW,OAAKX,QAAL,CAAcW,YAAd,EAA4BD,IAA5B,EAAkCd,OAAlC,CAAX;AAAA,6BAA5C,GADJ;AAGH;AANL,iBADJ;AASI;AAAC,wBAAD,CAAM,KAAN,CAAY,KAAZ;AAAA,sBAAkB,OAAO,KAAKkB,IAAL,CAAU,YAAV,CAAzB;AACK;AAAA,4BAAEJ,IAAF,SAAEA,IAAF;AAAA,+BACG;AAAA;AAAA;AACI;AAAC,oCAAD;AAAA,kCAAM,OAAM,sBAAZ,EAAmC,QAAQ,EAACG,IAAIH,KAAKG,EAAV,EAA3C;AAA0D;AAAA;AAAA;AAASH,yCAAKK;AAAd;AAA1D,6BADJ;AAEI,qEAFJ;AAEUL,iCAAKM;AAFf,yBADH;AAAA;AADL,iBATJ;AAiBI,8CAAC,IAAD,CAAM,KAAN,CAAY,KAAZ,IAAkB,OAAO,KAAKF,IAAL,CAAU,aAAV,CAAzB,EAAmD,MAAK,aAAxD;AAjBJ;AADJ,SADJ;AAuBH;AA7B0B,CAA/B;;kBAgCe,qBAAOG,eAAP,CAAuBrC,eAAvB,EAAwC,EAACsC,SAAS,CAAC,MAAD,EAAS,QAAT,EAAmB,MAAnB,CAAV,EAAxC,C","file":"index.js","sourcesContent":["import React from 'react';\nimport _ from 'lodash';\nimport {Webiny} from 'webiny-client';\n\n/**\n * @i18n.namespace Webiny.Backend.UserPermissions\n */\nclass UserPermissions extends Webiny.Ui.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            permissions: []\n        };\n    }\n\n    componentWillMount() {\n        super.componentWillMount();\n        new Webiny.Api.Endpoint(this.props.api).get('/', {_perPage: 1000, _sort: 'name'}).then(apiResponse => {\n            this.setState({permissions: apiResponse.getData('list')});\n        });\n    }\n\n    onChange(index, permission, enabled) {\n        const value = this.props.value || [];\n        if (enabled) {\n            value.push(permission);\n        } else {\n            value.splice(index, 1);\n        }\n        this.props.onChange(value);\n    }\n}\n\nUserPermissions.defaultProps = {\n    api: '/entities/webiny/user-permissions',\n    value: [],\n    onChange: _.noop,\n    renderer() {\n        const {List, Switch, Link} = this.props;\n        return (\n            <List.Table data={this.state.permissions}>\n                <List.Table.Row>\n                    <List.Table.Field style={{width: 140}}>\n                        {({data}) => {\n                            const checkedIndex = _.findIndex(this.props.value, {id: data.id});\n                            return (\n                                <Switch value={checkedIndex > -1} onChange={enabled => this.onChange(checkedIndex, data, enabled)}/>\n                            );\n                        }}\n                    </List.Table.Field>\n                    <List.Table.Field label={this.i18n('Permission')}>\n                        {({data}) => (\n                            <span>\n                                <Link route=\"UserPermissions.Edit\" params={{id: data.id}}><strong>{data.name}</strong></Link>\n                                <br/>{data.slug}\n                            </span>\n                        )}\n                    </List.Table.Field>\n                    <List.Table.Field label={this.i18n('Description')} name=\"description\"/>\n                </List.Table.Row>\n            </List.Table>\n        );\n    }\n};\n\nexport default Webiny.createComponent(UserPermissions, {modules: ['List', 'Switch', 'Link']});"]}