{"version":3,"sources":["../../../../../src/Modules/Acl/Views/Modal/ImportModal.jsx"],"names":["ImportModal","model","form","data","JSON","parse","onSubmit","props","Modal","Form","CodeEditor","Button","api","label","formProps","onSuccessMessage","name","submit","onSubmitSuccess","hide","then","onImported","i18n","Ui","ModalComponent","defaultProps","assign","noop","createComponent","modules"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAAA;;;;AACA;;AACA;;;;;;AAEA;;;IAGMA,W;;;;;;;;;;qCAEoB;AAAA,gBAAdC,KAAc,QAAdA,KAAc;AAAA,gBAAPC,IAAO,QAAPA,IAAO;;AAClB,gBAAMC,OAAOC,KAAKC,KAAL,CAAWJ,MAAME,IAAjB,CAAb;AACA,mBAAOD,KAAKI,QAAL,CAAcH,IAAd,CAAP;AACH;;;uCAEc;AAAA;;AAAA,yBAC2C,KAAKI,KADhD;AAAA,gBACJC,KADI,UACJA,KADI;AAAA,gBACGC,IADH,UACGA,IADH;AAAA,gBACSC,UADT,UACSA,UADT;AAAA,gBACqBC,MADrB,UACqBA,MADrB;AAAA,gBAC6BC,GAD7B,UAC6BA,GAD7B;AAAA,gBACkCC,KADlC,UACkCA,KADlC;;;AAGX,gBAAMC,YAAY;AACdF,wBADc;AAEdG,kCAAkB;AAAA,wBAAEd,KAAF,SAAEA,KAAF;AAAA,2BAAa;AAAA;AAAA;AAAOY,6BAAP;AAAA;AAAc;AAAA;AAAA;AAASZ,kCAAMe;AAAf,yBAAd;AAAA;AAAA,qBAAb;AAAA,iBAFJ;AAGdV,0BAAU,KAAKW,MAHD;AAIdC,iCAAiB;AAAA,2BAAM,OAAKC,IAAL,GAAYC,IAAZ,CAAiB,OAAKb,KAAL,CAAWc,UAA5B,CAAN;AAAA;AAJH,aAAlB;;AAOA,mBACI;AAAC,qBAAD,CAAO,MAAP;AAAA;AACI;AAAC,wBAAD;AAAUP,6BAAV;AACK;AAAA,4BAAEZ,IAAF,SAAEA,IAAF;AAAA,+BACG;AAAC,iCAAD,CAAO,OAAP;AAAA;AACI,0DAAC,IAAD,CAAM,MAAN,OADJ;AAEI,0DAAC,KAAD,CAAO,MAAP,IAAc,OAAO,OAAKoB,IAAL,mBAA4B,EAACT,YAAD,EAA5B,CAArB,EAA2D,SAAS,OAAKM,IAAzE,GAFJ;AAGI;AAAC,qCAAD,CAAO,IAAP;AAAA;AACI,8DAAC,IAAD,CAAM,KAAN,OADJ;AAEI,8DAAC,UAAD,IAAY,MAAK,iBAAjB,EAAmC,MAAK,MAAxC,EAA+C,UAAS,eAAxD;AAFJ,6BAHJ;AAOI;AAAC,qCAAD,CAAO,MAAP;AAAA;AACI,8DAAC,MAAD,IAAQ,OAAO,OAAKG,IAAL,CAAU,QAAV,CAAf,EAAoC,MAAK,SAAzC,EAAmD,SAASpB,KAAKe,MAAjE;AADJ;AAPJ,yBADH;AAAA;AADL;AADJ,aADJ;AAmBH;;;EApCqB,qBAAOM,EAAP,CAAUC,c;;AAuCpCxB,YAAYyB,YAAZ,GAA2B,iBAAEC,MAAF,CAAS,EAAT,EAAa,qBAAOH,EAAP,CAAUC,cAAV,CAAyBC,YAAtC,EAAoD;AAC3Eb,SAAK,EADsE;AAE3EC,WAAO,EAFoE;AAG3EQ,gBAAY,iBAAEM;AAH6D,CAApD,CAA3B;;kBAMe,qBAAOC,eAAP,CAAuB5B,WAAvB,EAAoC,EAAC6B,SAAS,CAAC,MAAD,EAAS,OAAT,EAAkB,YAAlB,EAAgC,QAAhC,CAAV,EAApC,C","file":"ImportModal.js","sourcesContent":["import React from 'react';\nimport {Webiny} from 'webiny-client';\nimport _ from 'lodash';\n\n/**\n * @i18n.namespace Webiny.Backend.Acl.Modal.ImportModal\n */\nclass ImportModal extends Webiny.Ui.ModalComponent {\n\n    submit({model, form}) {\n        const data = JSON.parse(model.data);\n        return form.onSubmit(data);\n    }\n\n    renderDialog() {\n        const {Modal, Form, CodeEditor, Button, api, label} = this.props;\n\n        const formProps = {\n            api,\n            onSuccessMessage: ({model}) => <span>{label} <strong>{model.name}</strong> was imported!</span>,\n            onSubmit: this.submit,\n            onSubmitSuccess: () => this.hide().then(this.props.onImported)\n        };\n        \n        return (\n            <Modal.Dialog>\n                <Form {...formProps}>\n                    {({form}) => (\n                        <Modal.Content>\n                            <Form.Loader/>\n                            <Modal.Header title={this.i18n(`Import {label}`, {label})} onClose={this.hide}/>\n                            <Modal.Body>\n                                <Form.Error/>\n                                <CodeEditor mode=\"text/javascript\" name=\"data\" validate=\"required,json\"/>\n                            </Modal.Body>\n                            <Modal.Footer>\n                                <Button label={this.i18n('Import')} type=\"primary\" onClick={form.submit}/>\n                            </Modal.Footer>\n                        </Modal.Content>\n                    )}\n                </Form>\n            </Modal.Dialog>\n        );\n    }\n}\n\nImportModal.defaultProps = _.assign({}, Webiny.Ui.ModalComponent.defaultProps, {\n    api: '',\n    label: '',\n    onImported: _.noop\n});\n\nexport default Webiny.createComponent(ImportModal, {modules: ['Form', 'Modal', 'CodeEditor', 'Button']});"]}