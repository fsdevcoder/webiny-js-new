{"version":3,"sources":["../../../../../src/Modules/Acl/Views/Modal/ExportModal.jsx"],"names":["ExportModal","props","state","content","loading","_fields","fields","api","Api","Endpoint","get","data","id","then","response","getData","map","setState","JSON","stringify","Modal","Copy","CodeHighlight","Loader","label","i18n","height","Ui","ModalComponent","defaultProps","assign","createComponent","modules"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;AACA;;;;AACA;;;;AAEA;;;IAGMA,W;;;AAEF,yBAAYC,KAAZ,EAAmB;AAAA;;AAAA,4IACTA,KADS;;AAGf,cAAKC,KAAL,GAAa;AACTC,qBAAS,EADA;AAETC,qBAAS;AAFA,SAAb;AAHe;AAOlB;;;;6CAEoB;AAAA;;AACjB;AACA,gBAAMC,UAAU,KAAKJ,KAAL,CAAWK,MAA3B;AACA,gBAAMC,MAAM,IAAI,qBAAOC,GAAP,CAAWC,QAAf,CAAwB,KAAKR,KAAL,CAAWM,GAAnC,CAAZ;AACA,mBAAOA,IAAIG,GAAJ,CAAQ,KAAKT,KAAL,CAAWU,IAAX,CAAgBC,EAAxB,EAA4B,EAACP,gBAAD,EAA5B,EAAuCQ,IAAvC,CAA4C,oBAAY;AAC3D,oBAAIF,OAAOG,SAASC,OAAT,CAAiB,QAAjB,CAAX;AACA,uBAAOJ,KAAKC,EAAZ;AACA,oBAAG,OAAKX,KAAL,CAAWe,GAAd,EAAmB;AACfL,yBAAK,OAAKV,KAAL,CAAWe,GAAhB,IAAuB,iBAAEA,GAAF,CAAML,KAAK,OAAKV,KAAL,CAAWe,GAAhB,CAAN,EAA4B,MAA5B,CAAvB;AACH;;AAED,uBAAKC,QAAL,CAAc;AACVb,6BAAS,KADC;AAEVD,6BAASe,KAAKC,SAAL,CAAeR,IAAf,EAAqB,IAArB,EAA2B,CAA3B;AAFC,iBAAd;AAIH,aAXM,CAAP;AAYH;;;uCAEc;AAAA,yBACyC,KAAKV,KAD9C;AAAA,gBACJmB,KADI,UACJA,KADI;AAAA,gBACGC,IADH,UACGA,IADH;AAAA,gBACSC,aADT,UACSA,aADT;AAAA,gBACwBC,MADxB,UACwBA,MADxB;AAAA,gBACgCC,KADhC,UACgCA,KADhC;;AAEX,mBACI;AAAC,qBAAD,CAAO,MAAP;AAAA;AACI;AAAC,yBAAD,CAAO,OAAP;AAAA;AACI,kDAAC,KAAD,CAAO,MAAP,IAAc,OAAO,KAAKC,IAAL,CAAU,gBAAV,EAA4B,EAACD,YAAD,EAA5B,CAArB,GADJ;AAEI;AAAC,6BAAD,CAAO,IAAP;AAAA,0BAAY,OAAO,KAAKtB,KAAL,CAAWE,OAAX,GAAqB,EAACsB,QAAQ,GAAT,EAArB,GAAqC,EAAxD;AACK,6BAAKxB,KAAL,CAAWE,OAAX,GAAqB,8BAAC,MAAD,OAArB,GAAiC;AAAC,yCAAD;AAAA,8BAAe,UAAS,MAAxB;AAAgC,iCAAKF,KAAL,CAAWC;AAA3C;AADtC,qBAFJ;AAKI;AAAC,6BAAD,CAAO,MAAP;AAAA;AACI,sDAAC,IAAD,CAAM,MAAN,IAAa,OAAO,KAAKsB,IAAL,CAAU,MAAV,CAApB,EAAuC,MAAK,SAA5C,EAAsD,OAAO,KAAKvB,KAAL,CAAWC,OAAxE,EAAiF,UAAU,KAAKD,KAAL,CAAWC,OAAtG;AADJ;AALJ;AADJ,aADJ;AAaH;;;EA5CqB,qBAAOwB,EAAP,CAAUC,c;;AA+CpC5B,YAAY6B,YAAZ,GAA2B,iBAAEC,MAAF,CAAS,EAAT,EAAa,qBAAOH,EAAP,CAAUC,cAAV,CAAyBC,YAAtC,EAAoD;AAC3EtB,SAAK,EADsE;AAE3EI,UAAM,EAFqE;AAG3EK,SAAK,EAHsE;AAI3EQ,WAAO,EAJoE;AAK3ElB,YAAQ;AALmE,CAApD,CAA3B;;kBAQe,qBAAOyB,eAAP,CAAuB/B,WAAvB,EAAoC,EAACgC,SAAS,CAAC,OAAD,EAAU,MAAV,EAAkB,eAAlB,EAAmC,QAAnC,CAAV,EAApC,C","file":"ExportModal.js","sourcesContent":["import React from 'react';\nimport _ from 'lodash';\nimport {Webiny} from 'webiny-client';\n\n/**\n * @i18n.namespace Webiny.Backend.Acl.Modal.ExportModal\n */\nclass ExportModal extends Webiny.Ui.ModalComponent {\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            content: '',\n            loading: true\n        };\n    }\n\n    componentWillMount() {\n        super.componentWillMount();\n        const _fields = this.props.fields;\n        const api = new Webiny.Api.Endpoint(this.props.api);\n        return api.get(this.props.data.id, {_fields}).then(response => {\n            let data = response.getData('entity');\n            delete data.id;\n            if(this.props.map) {\n                data[this.props.map] = _.map(data[this.props.map], 'slug');\n            }\n\n            this.setState({\n                loading: false,\n                content: JSON.stringify(data, null, 4)\n            });\n        });\n    }\n\n    renderDialog() {\n        const {Modal, Copy, CodeHighlight, Loader, label} = this.props;\n        return (\n            <Modal.Dialog>\n                <Modal.Content>\n                    <Modal.Header title={this.i18n('Export {label}', {label})}/>\n                    <Modal.Body style={this.state.loading ? {height: 200} : {}}>\n                        {this.state.loading ? <Loader/> : <CodeHighlight language=\"json\">{this.state.content}</CodeHighlight>}\n                    </Modal.Body>\n                    <Modal.Footer>\n                        <Copy.Button label={this.i18n('Copy')} type=\"primary\" value={this.state.content} renderIf={this.state.content}/>\n                    </Modal.Footer>\n                </Modal.Content>\n            </Modal.Dialog>\n        );\n    }\n}\n\nExportModal.defaultProps = _.assign({}, Webiny.Ui.ModalComponent.defaultProps, {\n    api: '',\n    data: {},\n    map: '',\n    label: '',\n    fields: ''\n});\n\nexport default Webiny.createComponent(ExportModal, {modules: ['Modal', 'Copy', 'CodeHighlight', 'Loader']});"]}