{"version":3,"sources":["../../../../../src/Modules/Acl/Views/Modal/SystemApiToken.jsx"],"names":["SystemApiTokenModal","props","state","confirmed","Button","Modal","Link","Copy","Alert","Grid","Label","showToken","i18n","setState","token","createTokenLink","hide","then","createToken","label","Ui","ModalComponent","createComponent","modules"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAAA;;;;AACA;;;;AAEA;;;IAGMA,mB;;;AAEF,iCAAYC,KAAZ,EAAmB;AAAA;;AAAA,4JACTA,KADS;;AAGf,cAAKC,KAAL,GAAa;AACTC,uBAAW;AADF,SAAb;AAHe;AAMlB;;;;uCAEc;AAAA;;AAAA,yBAC6C,KAAKF,KADlD;AAAA,gBACJG,MADI,UACJA,MADI;AAAA,gBACIC,KADJ,UACIA,KADJ;AAAA,gBACWC,IADX,UACWA,IADX;AAAA,gBACiBC,IADjB,UACiBA,IADjB;AAAA,gBACuBC,KADvB,UACuBA,KADvB;AAAA,gBAC8BC,IAD9B,UAC8BA,IAD9B;AAAA,gBACoCC,KADpC,UACoCA,KADpC;;AAEX,gBAAIC,YACA,8BAAC,MAAD;AACI,sBAAK,SADT;AAEI,uBAAO,KAAKC,IAAL,CAAU,2EAAV,CAFX;AAGI,yBAAS;AAAA,2BAAM,OAAKC,QAAL,CAAc,EAACV,WAAW,IAAZ,EAAd,CAAN;AAAA,iBAHb,GADJ;;AAOA,gBAAI,KAAKD,KAAL,CAAWC,SAAf,EAA0B;AACtBQ,4BAAY,8BAAC,IAAD,CAAM,KAAN,IAAY,OAAO,KAAKV,KAAL,CAAWa,KAA9B,GAAZ;AACH;;AAED,mBACI;AAAC,qBAAD,CAAO,MAAP;AAAA;AACI;AAAC,yBAAD,CAAO,OAAP;AAAA;AACI,kDAAC,KAAD,CAAO,MAAP,IAAc,OAAO,KAAKF,IAAL,CAAU,kBAAV,CAArB,GADJ;AAEI;AAAC,6BAAD,CAAO,IAAP;AAAA;AACI;AAAC,iCAAD;AAAA,8BAAO,MAAK,MAAZ;AACK,iCAAKA,IAAL,yEAAkF;AAC/EG,iDACI;AAAC,wCAAD;AAAA,sCAAM,SAAS;AAAA,mDAAM,OAAKC,IAAL,GAAYC,IAAZ,CAAiB;AAAA,uDAAM,OAAKhB,KAAL,CAAWiB,WAAX,EAAN;AAAA,6CAAjB,CAAN;AAAA,yCAAf;AACK,yCAAKN,IAAL,CAAU,wBAAV;AADL;AAF2E,6BAAlF;AADL,yBADJ;AAWI;AAAA;AAAA;AACK,iCAAKA,IAAL,CAAU,6EAAV,CADL;AAEI,qEAFJ;AAEU,iCAAKA,IAAL,CAAU,0EAAV,CAFV;AAGI,qEAHJ;AAGS,qEAHT;AAIK,iCAAKA,IAAL,kFAA2F;AACxFO,uCAAO;AAAC,yCAAD;AAAA,sCAAO,YAAP;AAAA;AAAA;AADiF,6BAA3F;AAJL,yBAXJ;AAoBI;AAAC,gCAAD,CAAM,GAAN;AAAA;AACI;AAAC,oCAAD,CAAM,GAAN;AAAA,kCAAU,KAAK,EAAf,EAAmB,WAAU,aAA7B;AACKR;AADL;AADJ;AApBJ,qBAFJ;AA4BI;AAAC,6BAAD,CAAO,MAAP;AAAA;AACI;AAAC,gCAAD;AAAA,8BAAM,MAAK,SAAX,EAAqB,OAAM,MAA3B,EAAkC,OAAM,cAAxC,EAAuD,QAAQ,EAACG,OAAO,QAAR,EAA/D;AAAmF,iCAAKF,IAAL,CAAU,WAAV;AAAnF,yBADJ;AAEI,sDAAC,MAAD,IAAQ,OAAO,KAAKA,IAAL,CAAU,OAAV,CAAf,EAAmC,SAAS,KAAKI,IAAjD;AAFJ;AA5BJ;AADJ,aADJ;AAqCH;;;EA5D6B,qBAAOI,EAAP,CAAUC,c;;kBA+D7B,qBAAOC,eAAP,CAAuBtB,mBAAvB,EAA4C;AACvDuB,aAAS,CAAC,QAAD,EAAW,OAAX,EAAoB,MAApB,EAA4B,MAA5B,EAAoC,OAApC,EAA6C,MAA7C,EAAqD,OAArD;AAD8C,CAA5C,C","file":"SystemApiToken.js","sourcesContent":["import React from 'react';\nimport {Webiny} from 'webiny-client';\n\n/**\n * @i18n.namespace Webiny.Backend.Acl.Modal.SystemApiTokenModal\n */\nclass SystemApiTokenModal extends Webiny.Ui.ModalComponent {\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            confirmed: false\n        };\n    }\n\n    renderDialog() {\n        const {Button, Modal, Link, Copy, Alert, Grid, Label} = this.props;\n        let showToken = (\n            <Button\n                type=\"primary\"\n                label={this.i18n(\"I'm well aware of possible consequences of sharing this token. Reveal it!\")}\n                onClick={() => this.setState({confirmed: true})}/>\n        );\n\n        if (this.state.confirmed) {\n            showToken = <Copy.Input value={this.props.token}/>;\n        }\n\n        return (\n            <Modal.Dialog>\n                <Modal.Content>\n                    <Modal.Header title={this.i18n('System API token')}/>\n                    <Modal.Body>\n                        <Alert type=\"info\">\n                            {this.i18n(`To grant access to your API to 3rd party clients, {createTokenLink}.`, {\n                                createTokenLink: (\n                                    <Link onClick={() => this.hide().then(() => this.props.createToken())}>\n                                        {this.i18n('Create a new API token')}\n                                    </Link>\n                                )\n                            })}\n                        </Alert>\n\n                        <p>\n                            {this.i18n('System API token allows its bearer to access resources exposed by your API.')}\n                            <br/>{this.i18n('This system token is not meant to be shared, it is for your system only!')}\n                            <br/><br/>\n                            {this.i18n(`Use it when you need to make internal API calls, by sending a {label} header.`, {\n                                label: <Label inline>X-Webiny-Authorization</Label>\n                            })}\n\n                        </p>\n                        <Grid.Row>\n                            <Grid.Col all={12} className=\"text-center\">\n                                {showToken}\n                            </Grid.Col>\n                        </Grid.Row>\n                    </Modal.Body>\n                    <Modal.Footer>\n                        <Link type=\"default\" align=\"left\" route=\"ApiLogs.List\" params={{token: 'system'}}>{this.i18n('View logs')}</Link>\n                        <Button label={this.i18n('Close')} onClick={this.hide}/>\n                    </Modal.Footer>\n                </Modal.Content>\n            </Modal.Dialog>\n        );\n    }\n}\n\nexport default Webiny.createComponent(SystemApiTokenModal, {\n    modules: ['Button', 'Modal', 'Link', 'Copy', 'Alert', 'Grid', 'Label']\n});"]}