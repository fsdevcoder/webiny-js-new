{"version":3,"sources":["../../../../../src/Modules/Acl/Views/Modal/ApiTokenModal.jsx"],"names":["ApiTokenModal","props","Modal","Form","Grid","Input","Switch","Button","Tabs","UserRoles","UserRoleGroups","formProps","api","fields","id","get","data","onSubmitSuccess","refreshTokens","hide","onSuccessMessage","defaultModel","dialog","model","form","i18n","example","submit","Ui","ModalComponent","createComponent","modules"],"mappings":"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","file":"ApiTokenModal.js","sourcesContent":["import React from 'react';\nimport _ from 'lodash';\nimport {Webiny} from 'webiny-client';\n\n/**\n * @i18n.namespace Webiny.Backend.Acl.Modal.ApiTokenModal\n */\nclass ApiTokenModal extends Webiny.Ui.ModalComponent {\n\n    renderDialog() {\n        const {Modal, Form, Grid, Input, Switch, Button, Tabs, UserRoles, UserRoleGroups} = this.props;\n\n        const formProps = {\n            api: '/entities/webiny/api-token',\n            fields: '*,roles[id],roleGroups[id]',\n            id: _.get(this.props.data, 'id'),\n            onSubmitSuccess: () => {\n                this.props.refreshTokens();\n                this.hide();\n            },\n            onSuccessMessage: () => {\n                return `Token was saved successfully!`;\n            },\n            defaultModel: this.props.data\n        };\n\n        return (\n            <Modal.Dialog wide={true}>\n                {({dialog}) => (\n                    <Form {...formProps}>\n                        {({model, form}) => (\n                            <Modal.Content>\n                                <Form.Loader/>\n                                <Modal.Header title={this.i18n('API Token')} onClose={dialog.hide}/>\n                                <Modal.Body>\n                                    <Grid.Row>\n                                        <Grid.Col all={12}>\n                                            <Form.Error/>\n                                            <Input readOnly label={this.i18n('Token')} name=\"token\" renderIf={() => model.id}/>\n                                            <Input label={this.i18n('Owner')} name=\"owner\" validate=\"required\" placeholder={this.i18n('Eg: webiny.com')}/>\n                                            <Input\n                                                label={this.i18n('Description')}\n                                                name=\"description\"\n                                                validate=\"required\"\n                                                description={<span>{this.i18n(`Try to keep it short, for example: {example}`, {example: <strong>Project X - Issue tracker</strong>})}</span>}\n                                                placeholder={this.i18n('Short description of usage')}/>\n                                            <Switch label={this.i18n('Enabled')} name=\"enabled\"/>\n                                            <Switch label={this.i18n('Log requests')} name=\"logRequests\"/>\n                                        </Grid.Col>\n                                    </Grid.Row>\n                                    <br/>\n                                    <Grid.Row>\n                                        <Grid.Col all={12}>\n                                            <Tabs>\n                                                <Tabs.Tab label={this.i18n('Roles')} icon=\"fa-user\">\n                                                    <UserRoles name=\"roles\"/>\n                                                </Tabs.Tab>\n                                                <Tabs.Tab label={this.i18n('Role Groups')} icon=\"fa-users\">\n                                                    <UserRoleGroups name=\"roleGroups\"/>\n                                                </Tabs.Tab>\n                                            </Tabs>\n                                        </Grid.Col>\n                                    </Grid.Row>\n                                </Modal.Body>\n                                <Modal.Footer>\n                                    <Button label={this.i18n('Cancel')} onClick={this.hide}/>\n                                    <Button type=\"primary\" label={this.i18n('Save token')} onClick={form.submit}/>\n                                </Modal.Footer>\n                            </Modal.Content>\n                        )}\n                    </Form>\n                )}\n            </Modal.Dialog>\n        );\n    }\n}\n\nexport default Webiny.createComponent(ApiTokenModal, {\n    modules: ['Modal', 'Form', 'Grid', 'Input', 'Switch', 'Button', 'Tabs', {\n        UserRoles: 'Webiny/Backend/UserRoles',\n        UserRoleGroups: 'Webiny/Backend/UserRoleGroups'\n    }]\n});"]}