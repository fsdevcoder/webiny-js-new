{"version":3,"sources":["../../../../src/Modules/Acl/Views/UserPermissionsList.jsx"],"names":["UserPermissionsList","Ui","View","defaultProps","renderer","props","Table","List","listProps","ref","list","api","fields","connectToRouter","query","_sort","searchFields","perPage","rolesLink","i18n","showView","apply","data","id","name","description","loadData","createComponent","modulesProp","modules"],"mappings":"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","file":"UserPermissionsList.js","sourcesContent":["import React from 'react';\nimport {Webiny} from 'webiny-client';\nimport ExportPermissionModal from './Modal/ExportModal';\nimport ImportPermissionModal from './Modal/ImportModal';\n\n/**\n * @i18n.namespace Webiny.Backend.Acl.UserPermissionsList\n */\nclass UserPermissionsList extends Webiny.Ui.View {\n\n}\n\nUserPermissionsList.defaultProps = {\n    renderer() {\n        const {Ui} = this.props;\n        const Table = Ui.List.Table;\n\n        const listProps = {\n            ref: ref => this.list = ref,\n            api: '/entities/webiny/user-permissions',\n            fields: 'id,name,slug,createdOn,description',\n            connectToRouter: true,\n            query: {_sort: 'name'},\n            searchFields: 'name,slug',\n            perPage: 25\n        };\n\n        const rolesLink = <Ui.Link route=\"UserRoles.List\">{this.i18n('Roles')}</Ui.Link>;\n\n        return (\n            <Ui.ViewSwitcher>\n                <Ui.ViewSwitcher.View view=\"permissionsList\" defaultView>\n                    {({showView}) => (\n                        <Ui.View.List>\n                            <Ui.View.Header\n                                title={this.i18n('ACL - Permissions')}\n                                description={\n                                    <span>\n                                        {this.i18n(`Permissions define what a user is allowed to do with entities and services.\n                                                    Define permissions and then group them into {rolesLink}.`, {rolesLink})}\n                                    </span>\n                                }>\n                                <Ui.ButtonGroup>\n                                    <Ui.Link type=\"primary\" route=\"UserPermissions.Create\">\n                                        <Ui.Icon icon=\"icon-plus-circled\"/>\n                                        {this.i18n('Create')}\n                                    </Ui.Link>\n                                    <Ui.Button\n                                        type=\"secondary\"\n                                        onClick={showView('importModal')}\n                                        icon=\"fa-upload\"\n                                        label={this.i18n('Import')}/>\n                                </Ui.ButtonGroup>\n                            </Ui.View.Header>\n                            <Ui.View.Body>\n                                <Ui.List {...listProps}>\n                                    <Ui.List.FormFilters>\n                                        {({apply}) => (\n                                            <Ui.Grid.Row>\n                                                <Ui.Grid.Col all={12}>\n                                                    <Ui.Input\n                                                        name=\"_searchQuery\"\n                                                        placeholder={this.i18n('Search by name or slug')}\n                                                        onEnter={apply()}/>\n                                                </Ui.Grid.Col>\n                                            </Ui.Grid.Row>\n                                        )}\n                                    </Ui.List.FormFilters>\n                                    <Table>\n                                        <Table.Row>\n                                            <Table.Field name=\"name\" label={this.i18n('Name')} sort=\"name\">\n                                                {({data}) => (\n                                                    <span>\n                                                        <Ui.Link route=\"UserPermissions.Edit\" params={{id: data.id}}>\n                                                            <strong>{data.name}</strong>\n                                                        </Ui.Link>\n                                                        <br/>\n                                                        {data.description}\n                                                    </span>\n                                                )}\n                                            </Table.Field>\n                                            <Table.Field name=\"slug\" label={this.i18n('Slug')} sort=\"slug\"/>\n                                            <Table.Actions>\n                                                <Table.EditAction route=\"UserPermissions.Edit\"/>\n                                                <Table.Action\n                                                    label={this.i18n('Export')}\n                                                    icon=\"fa-download\"\n                                                    onClick={showView('exportModal')}/>\n                                                <Table.DeleteAction/>\n                                            </Table.Actions>\n                                        </Table.Row>\n                                    </Table>\n                                    <Ui.List.Pagination/>\n                                </Ui.List>\n                            </Ui.View.Body>\n                        </Ui.View.List>\n                    )}\n                </Ui.ViewSwitcher.View>\n\n                <Ui.ViewSwitcher.View view=\"exportModal\" modal>\n                    {({data: {data}}) => (\n                        <ExportPermissionModal\n                            data={data}\n                            api=\"/entities/webiny/user-permissions\"\n                            fields=\"name,slug,description,permissions\"\n                            label={this.i18n('Permission')}/>\n                    )}\n                </Ui.ViewSwitcher.View>\n\n                <Ui.ViewSwitcher.View view=\"importModal\" modal>\n                    {() => (\n                        <ImportPermissionModal\n                            api=\"/entities/webiny/user-permissions\"\n                            label={this.i18n('Permission')}\n                            onImported={() => this.list.loadData()}/>\n                    )}\n                </Ui.ViewSwitcher.View>\n            </Ui.ViewSwitcher>\n        );\n    }\n};\n\nexport default Webiny.createComponent(UserPermissionsList, {\n    modulesProp: 'Ui',\n    modules: ['ViewSwitcher', 'Link', 'View', 'List', 'Icon', 'Grid', 'Input', 'Button', 'ButtonGroup']\n});"]}