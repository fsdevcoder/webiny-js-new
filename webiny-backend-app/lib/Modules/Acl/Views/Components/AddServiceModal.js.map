{"version":3,"sources":["../../../../../src/Modules/Acl/Views/Components/AddServiceModal.jsx"],"names":["AddServiceModal","api","Api","Endpoint","props","Modal","Form","Grid","Select","Button","dialog","model","form","showLoading","query","details","classId","service","setQuery","get","apiResponse","hideLoading","hide","onSubmit","getData","i18n","exclude","map","item","option","data","class","submit","Ui","ModalComponent","defaultProps","assign","noop","createComponent","modules"],"mappings":"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","file":"AddServiceModal.js","sourcesContent":["import React from 'react';\nimport _ from 'lodash';\nimport {Webiny} from 'webiny-client';\nimport matchOption from './matchOption';\n\n/**\n * @i18n.namespace Webiny.Backend.Acl.AddServiceModal\n */\nclass AddServiceModal extends Webiny.Ui.ModalComponent {\n    constructor() {\n        super();\n        this.api = new Webiny.Api.Endpoint('/services/webiny/services');\n    }\n\n    renderDialog() {\n        const {Modal, Form, Grid, Select, Button} = this.props;\n\n        return (\n            <Modal.Dialog>\n                {({dialog}) => (\n                    <Form\n                        onSubmit={async ({model, form}) => {\n                            form.showLoading();\n                            const query = {\n                                details: 'methods',\n                                classId: model.service\n                            };\n\n                            const apiResponse = await this.api.setQuery(query).get();\n\n                            form.hideLoading();\n                            await dialog.hide();\n\n                            this.props.onSubmit(apiResponse.getData());\n                        }}>\n                        {({form}) => (\n                            <Modal.Content>\n                                <Modal.Header title={this.i18n('Add service')} onClose={dialog.hide}/>\n                                <Modal.Body>\n                                    <Grid.Row>\n                                        <Grid.Col all={12}>\n                                            <Form.Error/>\n                                            <Form.Loader/>\n                                            <Select\n                                                description={this.i18n(`Services already added are not shown.`)}\n                                                placeholder={this.i18n('Select service...')}\n                                                name=\"service\"\n                                                validate=\"required\"\n                                                api=\"/services/webiny/services\"\n                                                query={{exclude: this.props.exclude.map(item => item.classId)}}\n                                                valueAttr=\"classId\"\n                                                textAttr=\"class\"\n                                                matcher={matchOption}\n                                                optionRenderer={({option}) => (\n                                                    <div>\n                                                        <strong>{option.data.classId}</strong><br/>{option.data.class}\n                                                    </div>\n                                                )}\n                                                selectedRenderer={({option}) => option.data.classId}\n                                                minimumResultsForSearch={5}/>\n                                        </Grid.Col>\n                                    </Grid.Row>\n                                </Modal.Body>\n                                <Modal.Footer>\n                                    <Button label={this.i18n('Cancel')} onClick={this.hide}/>\n                                    <Button type=\"primary\" label={this.i18n('Add')} onClick={form.submit}/>\n                                </Modal.Footer>\n                            </Modal.Content>\n                        )}\n                    </Form>\n                )}\n            </Modal.Dialog>\n        );\n    }\n}\n\nAddServiceModal.defaultProps = _.assign({}, Webiny.Ui.ModalComponent.defaultProps, {\n    onSubmit: _.noop,\n    exclude: [],\n});\n\nexport default Webiny.createComponent(AddServiceModal, {\n    modules: ['Modal', 'Form', 'Grid', 'Select', 'Button']\n});"]}