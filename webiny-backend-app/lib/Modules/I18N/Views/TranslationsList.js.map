{"version":3,"sources":["../../../../src/Modules/I18N/Views/TranslationsList.jsx"],"names":["TranslationsList","ref","state","locales","I18n","getLocales","then","setState","Ui","View","defaultProps","renderer","showView","i18n","linkToTextsSection","isArray","isEmpty","apply","data","loadData"],"mappings":"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","file":"TranslationsList.js","sourcesContent":["import React from 'react';\nimport {Webiny} from 'webiny-client';\nimport ExportTranslationsModal from './TranslationsList/ExportTranslationsModal';\nimport ImportTranslationsModal from './TranslationsList/ImportTranslationsModal';\nimport TextRow from './TranslationsList/TextRow';\nimport TranslatedTextPercentages from './TranslationsList/TranslatedTextPercentages';\nimport _ from 'lodash';\n\n/**\n * @i18n.namespace Webiny.Backend.I18N.TranslationsList\n */\nclass TranslationsList extends Webiny.Ui.View {\n    constructor() {\n        super();\n        this.ref = null;\n        this.state = {locales: null};\n    }\n\n    componentWillMount() {\n        super.componentWillMount();\n        Webiny.I18n.getLocales().then(locales => this.setState({locales}));\n    }\n}\n\nTranslationsList.defaultProps = {\n    renderer() {\n        return (\n            <Webiny.Ui.LazyLoad\n                modules={['ViewSwitcher', 'View', 'Button', 'ButtonGroup', 'Icon', 'List', 'Input', 'Form', 'Grid', 'Select', 'Alert', 'Link']}>\n                {Ui => (\n                    <Ui.ViewSwitcher>\n                        <Ui.ViewSwitcher.View view=\"translationsList\" defaultView>\n                            {({showView}) => (\n                                <Ui.View.List>\n                                    <Ui.View.Header\n                                        title={this.i18n(`Translations`)}\n                                        description={(\n                                            this.i18n('Manage translations for {linkToTextsSection} in all installed apps.', {\n                                                linkToTextsSection: <Ui.Link route=\"I18N.Texts.List\">{this.i18n('texts')}</Ui.Link>\n                                            })\n                                        )}>\n                                        <Ui.ButtonGroup>\n                                            <Ui.Button\n                                                type=\"primary\"\n                                                onClick={showView('importTranslationsModal')}\n                                                icon=\"fa-download\"\n                                                label={this.i18n(`Import`)}/>\n                                            <Ui.Button\n                                                type=\"secondary\"\n                                                onClick={showView('exportTranslationsModal')}\n                                                icon=\"fa-upload\"\n                                                label={this.i18n(`Export`)}/>\n                                        </Ui.ButtonGroup>\n                                    </Ui.View.Header>\n                                    <Ui.View.Body>\n                                        {_.isArray(this.state.locales) && _.isEmpty(this.state.locales) ? (\n                                            <Ui.Alert>\n                                                {this.i18n('Before editing translations, header over to {locales} section and create a locale.', {\n                                                    locales: <Ui.Link route=\"I18N.Locales.List\">{this.i18n('Locales')}</Ui.Link>\n                                                })}\n                                            </Ui.Alert>\n                                        ) : <TranslatedTextPercentages/>}\n                                        <Ui.List\n                                            ref={ref => this.ref = ref}\n                                            connectToRouter\n                                            title={this.i18n(`Translations`)}\n                                            api=\"/entities/webiny/i18n-texts\"\n                                            searchFields=\"key,base,app,translations.text\"\n                                            fields=\"key,base,translations\"\n                                            sort=\"-createdOn\">\n                                            <Ui.List.FormFilters>\n                                                {({apply}) => (\n                                                    <Ui.Grid.Row>\n                                                        <Ui.Grid.Col all={4}>\n                                                            <Ui.Input\n                                                                name=\"_searchQuery\"\n                                                                placeholder={this.i18n('Search by key, text or translation')}\n                                                                onEnter={apply()}/>\n                                                        </Ui.Grid.Col>\n                                                        <Ui.Grid.Col all={4}>\n                                                            <Ui.Select\n                                                                name=\"app\"\n                                                                api=\"/services/webiny/apps\"\n                                                                url=\"/installed\"\n                                                                textAttr=\"name\"\n                                                                valueAttr=\"name\"\n                                                                placeholder={this.i18n('Filter by app')}\n                                                                allowClear\n                                                                onChange={apply()}/>\n                                                        </Ui.Grid.Col>\n                                                        <Ui.Grid.Col all={4}>\n                                                            <Ui.Select\n                                                                api=\"/entities/webiny/i18n-text-groups\"\n                                                                name=\"group\"\n                                                                placeholder={this.i18n('Filter by text group')}\n                                                                allowClear\n                                                                onChange={apply()}/>\n                                                        </Ui.Grid.Col>\n                                                    </Ui.Grid.Row>\n                                                )}\n                                            </Ui.List.FormFilters>\n                                            <Ui.List.Table>\n                                                <Ui.List.Table.Row>\n                                                    <Ui.List.Table.Field label={this.i18n('Text')} align=\"left\">\n                                                        {({data}) => <TextRow locales={this.state.locales} text={data}/>}\n                                                    </Ui.List.Table.Field>\n                                                </Ui.List.Table.Row>\n                                                <Ui.List.Table.Footer/>\n                                            </Ui.List.Table>\n                                            <Ui.List.Pagination/>\n                                        </Ui.List>\n                                    </Ui.View.Body>\n                                </Ui.View.List>\n                            )}\n                        </Ui.ViewSwitcher.View>\n                        <Ui.ViewSwitcher.View view=\"exportTranslationsModal\" modal>\n                            {({showView, data: {data}}) => (\n                                <ExportTranslationsModal {...{showView, data}}/>\n                            )}\n                        </Ui.ViewSwitcher.View>\n                        <Ui.ViewSwitcher.View view=\"importTranslationsModal\" modal>\n                            {({showView, data: {data}}) => (\n                                <ImportTranslationsModal {...{showView, data}} onTranslationsImported={() => this.ref.loadData()}/>\n                            )}\n                        </Ui.ViewSwitcher.View>\n                    </Ui.ViewSwitcher>\n                )}\n            </Webiny.Ui.LazyLoad>\n        );\n    }\n};\n\nexport default TranslationsList;"]}