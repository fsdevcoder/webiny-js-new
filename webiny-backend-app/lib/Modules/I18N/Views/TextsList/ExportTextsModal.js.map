{"version":3,"sources":["../../../../../src/Modules/I18N/Views/TextsList/ExportTextsModal.jsx"],"names":["ExportTextsModal","state","groups","I18n","getTextGroups","then","setState","apps","output","id","name","forEach","includes","group","app","push","Ui","props","model","availableGroups","getAvailableGroups","i18n","hide","isEmpty","Config","ApiUrl","ModalComponent","defaultProps","assign","createComponent","modulesProp","modules"],"mappings":"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","file":"ExportTextsModal.js","sourcesContent":["import React from 'react';\nimport {Webiny} from 'webiny-client';\nimport _ from 'lodash';\n\n/**\n * @i18n.namespace Webiny.Backend.I18N.ExportTextsModal\n */\nclass ExportTextsModal extends Webiny.Ui.ModalComponent {\n    constructor() {\n        super();\n        this.state = {groups: []};\n    }\n\n    componentWillMount() {\n        super.componentWillMount();\n        Webiny.I18n.getTextGroups().then(groups => this.setState({groups}));\n    }\n\n    getAvailableGroups(apps) {\n        const output = [{id: 'none', name: 'Texts without group'}];\n        this.state.groups.forEach(group => {\n            if (_.includes(apps, group.app)) {\n                output.push(group);\n            }\n        });\n\n        return output;\n    }\n\n    renderDialog() {\n        const {Ui} = this.props;\n\n        return (\n            <Ui.Modal.Dialog>\n                <Ui.Form>\n                    {({model}) => {\n                        const availableGroups = this.getAvailableGroups(model.apps);\n                        return (\n                            <Ui.Modal.Content>\n                                <Ui.Form.Loader/>\n                                <Ui.Modal.Header title={this.i18n(`Export texts`)} onClose={this.hide}/>\n                                <Ui.Modal.Body>\n                                    <Ui.Form.Error/>\n                                    <Ui.Grid.Row>\n                                        <Ui.Grid.Col all={12}>\n                                            <Ui.CheckboxGroup\n                                                validate=\"required\"\n                                                name=\"apps\"\n                                                label={this.i18n('Select apps to export')}\n                                                api=\"/services/webiny/apps\"\n                                                url=\"/installed\"\n                                                textAttr=\"name\"\n                                                valueAttr=\"name\"/>\n                                        </Ui.Grid.Col>\n                                    </Ui.Grid.Row>\n                                    {!_.isEmpty(availableGroups) && (\n                                        <Ui.Grid.Row>\n                                            <Ui.Grid.Col all={12}>\n                                                <Ui.CheckboxGroup\n                                                    tooltip={this.i18n('Only groups from selected apps are shown.')}\n                                                    validate=\"required\"\n                                                    name=\"groups\"\n                                                    textAttr=\"name\"\n                                                    options={availableGroups}\n                                                    label={this.i18n('Select groups to export')}/>\n                                            </Ui.Grid.Col>\n                                        </Ui.Grid.Row>\n                                    )}\n                                </Ui.Modal.Body>\n                                <Ui.Modal.Footer >\n                                    <Ui.Button label={this.i18n(`Cancel`)} onClick={this.hide}/>\n                                    <Ui.DownloadLink\n                                        separate\n                                        disabled={_.isEmpty(model.apps)}\n                                        onClick={() => this.hide()}\n                                        method=\"POST\"\n                                        params={model}\n                                        type=\"primary\"\n                                        download={Webiny.Config.ApiUrl + '/entities/webiny/i18n-texts/export/json'}>\n                                        {this.i18n(`Export`)}\n                                    </Ui.DownloadLink>\n                                </Ui.Modal.Footer>\n                            </Ui.Modal.Content>\n                        );\n                    }}\n                </Ui.Form>\n            </Ui.Modal.Dialog>\n        );\n    }\n}\n\nExportTextsModal.defaultProps = _.assign({}, Webiny.Ui.ModalComponent.defaultProps);\n\nexport default Webiny.createComponent(ExportTextsModal, {\n    modulesProp: 'Ui',\n    modules: [\n        'Modal', 'Form', 'Grid', 'CheckboxGroup', 'Checkbox', 'Button', 'DownloadLink'\n    ]\n});"]}