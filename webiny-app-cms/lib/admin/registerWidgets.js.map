{"version":3,"sources":["../../src/admin/registerWidgets.js"],"names":["cmsService","app","services","get","addWidgetGroup","name","title","icon","addEditorWidget","group","type","widget","ParagraphWidget","ImageWidget","addWidget","ParagraphPreviewWidget","ImagePreviewWidget","addLayoutEditorWidget","RowWidget","layout","data","grid","loadWidgets","graphql","generateList","variables","perPage","then","list","map","baseWidget","getEditorWidget","globalWidget","origin","id"],"mappings":"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","file":"registerWidgets.js","sourcesContent":["// @flow\nimport _ from \"lodash\";\nimport { app } from \"webiny-app\";\nimport type CMS from \"./services/CMS\";\n\nimport ParagraphWidget from \"./widgets/pageEditor/paragraph\";\nimport ImageWidget from \"./widgets/pageEditor/image\";\nimport RowWidget from \"./widgets/layoutEditor/row\";\n\nimport ParagraphPreviewWidget from \"./../widgets/paragraph/index\";\nimport ImagePreviewWidget from \"./../widgets/image/index\";\n\nexport default () => {\n    const cmsService: CMS = app.services.get(\"cms\");\n\n    cmsService.addWidgetGroup({\n        name: \"text\",\n        title: \"Text\",\n        icon: \"font\"\n    });\n\n    cmsService.addWidgetGroup({\n        name: \"media\",\n        title: \"Media\",\n        icon: \"image\"\n    });\n\n    cmsService.addWidgetGroup({\n        name: \"global\",\n        title: \"Global\",\n        icon: \"globe\"\n    });\n\n    // Editor widgets\n    cmsService.addEditorWidget({\n        group: \"text\",\n        type: \"paragraph\",\n        title: \"Paragraph\",\n        icon: [\"fas\", \"align-left\"],\n        widget: new ParagraphWidget()\n    });\n\n    cmsService.addEditorWidget({\n        group: \"media\",\n        type: \"image\",\n        title: \"Image\",\n        icon: [\"fas\", \"image\"],\n        widget: new ImageWidget()\n    });\n\n    // Preview widgets\n    cmsService.addWidget({\n        type: \"paragraph\",\n        widget: new ParagraphPreviewWidget()\n    });\n\n    cmsService.addWidget({\n        type: \"image\",\n        widget: new ImagePreviewWidget()\n    });\n\n    // Layout editor widgets\n    cmsService.addLayoutEditorWidget({\n        type: \"grid-12\",\n        widget: new RowWidget({ layout: [12], title: \"Full Width\" }),\n        data: [{ grid: 12, widget: null }]\n    });\n\n    cmsService.addLayoutEditorWidget({\n        type: \"grid-6-6\",\n        widget: new RowWidget({ layout: [6, 6], title: \"Half Half\" }),\n        data: [{ grid: 6, widget: null }, { grid: 6, widget: null }]\n    });\n\n    cmsService.addLayoutEditorWidget({\n        type: \"grid-3-3-6\",\n        widget: new RowWidget({ layout: [3, 3, 6], title: \"One Two\" }),\n        data: [{ grid: 3, widget: null }, { grid: 3, widget: null }, { grid: 6, widget: null }]\n    });\n\n    cmsService.addLayoutEditorWidget({\n        type: \"grid-6-3-3\",\n        widget: new RowWidget({ layout: [6, 3, 3], title: \"Two One\" }),\n        data: [{ grid: 6, widget: null }, { grid: 3, widget: null }, { grid: 3, widget: null }]\n    });\n\n    cmsService.addLayoutEditorWidget({\n        type: \"grid-3-9\",\n        widget: new RowWidget({ layout: [3, 9], title: \"One Three\" }),\n        data: [{ grid: 3, widget: null }, { grid: 9, widget: null }]\n    });\n\n    cmsService.addLayoutEditorWidget({\n        type: \"grid-9-3\",\n        widget: new RowWidget({ layout: [9, 3], title: \"Three One\" }),\n        data: [{ grid: 9, widget: null }, { grid: 3, widget: null }]\n    });\n\n    cmsService.addLayoutEditorWidget({\n        type: \"grid-3-3-3-3\",\n        widget: new RowWidget({ layout: [3, 3, 3, 3], title: \"Full Split\" }),\n        data: [\n            { grid: 3, widget: null },\n            { grid: 3, widget: null },\n            { grid: 3, widget: null },\n            { grid: 3, widget: null }\n        ]\n    });\n\n    // Global widgets\n    const loadWidgets = app.graphql.generateList(\"CmsWidget\", \"id title type data settings\");\n\n    return loadWidgets({ variables: { perPage: 1000 } }).then(({ data }) => {\n        data.list.map(widget => {\n            const baseWidget = _.cloneDeep(cmsService.getEditorWidget(widget.type));\n            const globalWidget = {\n                origin: widget.id,\n                ...baseWidget,\n                ..._.pick(widget, [\"title\", \"data\", \"settings\"]),\n                group: \"global\"\n            };\n\n            cmsService.addEditorWidget(globalWidget);\n        });\n    });\n};\n"]}