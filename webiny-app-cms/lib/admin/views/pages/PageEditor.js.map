{"version":3,"sources":["../../../../src/admin/views/pages/PageEditor.jsx"],"names":["t","i18n","namespace","PageEditor","submit","content","model","map","widget","origin","props","modules","View","Link","Form","FormData","FormError","Icon","Loader","error","loading","filterContent","Bind","styles","viewHeader","padding","titleWrapper","titleRight","children","marginTop","name","active","id","paddingTop","React","Component"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;AACA;;AACA;;;;AACA;;;;;;AAEA,IAAMA,IAAIC,gBAAKC,SAAL,CAAe,4BAAf,CAAV;;IAEMC,U;;;;;;;;;;4CACmCC,M,EAAQ;AAAA,gBAA7BC,OAA6B,QAA7BA,OAA6B;AAAA,gBAAjBC,KAAiB;;AACzCA,kBAAMD,OAAN,GAAgBA,QAAQE,GAAR,CAAY,kBAAU;AAClC,oBAAIC,OAAOC,MAAX,EAAmB;AACf,2BAAOD,OAAO,MAAP,CAAP;AACA,2BAAOA,OAAO,UAAP,CAAP;AACH;;AAED,uBAAOA,MAAP;AACH,aAPe,CAAhB;;AASAJ,mBAAOE,KAAP;AACH;;;iCAEQ;AAAA;;AAAA,iCAC2D,KAAKI,KAAL,CAAWC,OADtE;AAAA,gBACGC,IADH,kBACGA,IADH;AAAA,gBACSC,IADT,kBACSA,IADT;AAAA,gBACeC,IADf,kBACeA,IADf;AAAA,gBACqBC,QADrB,kBACqBA,QADrB;AAAA,gBAC+BC,SAD/B,kBAC+BA,SAD/B;AAAA,gBAC0CC,IAD1C,kBAC0CA,IAD1C;AAAA,gBACgDC,MADhD,kBACgDA,MADhD;;;AAGL,mBACI;AAAC,wBAAD;AAAA;AACI,oCADJ;AAEI,4BAAQ,aAFZ;AAGI,kCAAc,EAAEb,SAAS,EAAX,EAHlB;AAII,4BAAQ;AAJZ;AAMK;AAAA,wBAAGC,KAAH,SAAGA,KAAH;AAAA,wBAAUF,MAAV,SAAUA,MAAV;AAAA,wBAAkBe,KAAlB,SAAkBA,KAAlB;AAAA,wBAAyBC,OAAzB,SAAyBA,OAAzB;AAAA,2BACG;AAAC,4BAAD;AAAA,0BAAM,OAAOd,KAAb,EAAoB,UAAU;AAAA,uCAAS,OAAKe,aAAL,CAAmBf,KAAnB,EAA0BF,MAA1B,CAAT;AAAA,6BAA9B;AACK;AAAA,gCAAGA,MAAH,SAAGA,MAAH;AAAA,gCAAWE,KAAX,SAAWA,KAAX;AAAA,gCAAkBgB,IAAlB,SAAkBA,IAAlB;AAAA,mCACG;AAAC,oCAAD,CAAM,IAAN;AAAA;AACKF,2CAAW,8BAAC,MAAD,OADhB;AAEI;AAAC,wCAAD,CAAM,MAAN;AAAA;AACI,gDAAQ;AAAA,gDAAGV,KAAH,SAAGA,KAAH;AAAA,mDACJ;AAAA;AAAA;AACI,+DAAWA,MAAMa,MAAN,CAAaC,UAD5B;AAEI,2DAAO,EAAEC,SAAS,WAAX;AAFX;AAII;AAAA;AAAA,sDAAK,WAAWf,MAAMa,MAAN,CAAaG,YAA7B;AACI;AAAC,4DAAD;AAAA;AACI,sFAAC,oBAAD,IAAY,MAAM,OAAlB;AADJ;AADJ,iDAJJ;AASI;AAAA;AAAA,sDAAK,WAAWhB,MAAMa,MAAN,CAAaI,UAA7B;AACKjB,0DAAMkB;AADX,iDATJ;AAYI;AAAA;AAAA,sDAAK,OAAO,EAAEC,WAAW,CAAb,EAAZ;AAAA;AACc;AAAA;AAAA;AAASvB,8DAAMwB;AAAf,qDADd;AAAA;AAC8CxB,0DAAMyB,MAAN,wBAD9C;AAAA;AAAA;AAZJ,6CADI;AAAA;AADZ;AAsBI;AAAC,4CAAD;AAAA,0CAAM,uBAAqBzB,MAAM0B,EAAjC,EAAuC,MAAK,WAA5C,EAAwD,YAAxD;AACI,sEAAC,IAAD,IAAM,MAAM,KAAZ,GADJ;AAAA;AAC2BhC,yCAD3B;AAAA,qCAtBJ;AAyBI;AAAC,4CAAD;AAAA,0CAAM,MAAK,SAAX,EAAqB,OAAM,OAA3B,EAAmC,SAASI,MAA5C;AACKJ,yCADL;AAAA;AAzBJ,iCAFJ;AA+BKmB,yCACG;AAAC,wCAAD,CAAM,KAAN;AAAA;AACI,kEAAC,SAAD,IAAW,OAAOA,KAAlB;AADJ,iCAhCR;AAoCI;AAAC,wCAAD,CAAM,IAAN;AAAA,sCAAW,eAAX,EAAqB,aAArB,EAA6B,OAAO,EAAEc,YAAY,EAAd,EAApC;AACI;AAAC,4CAAD;AAAA;AACI,sEAAC,qBAAD,IAAa,MAAM,SAAnB;AADJ;AADJ;AApCJ,6BADH;AAAA;AADL,qBADH;AAAA;AANL,aADJ;AAyDH;;;EA1EoBC,gBAAMC,S;;kBA6EhB,gCAAgBhC,UAAhB,EAA4B;AACvCQ,aAAS,CACL,MADK,EAEL,MAFK,EAGL,MAHK,EAIL,MAJK,EAKL,OALK,EAML,QANK,EAOL,MAPK,EAQL,OARK,EASL,QATK,EAUL,MAVK,EAWL,MAXK,EAYL,UAZK,EAaL,WAbK,EAcL,QAdK;AAD8B,CAA5B,C","file":"PageEditor.js","sourcesContent":["import React from \"react\";\nimport { createComponent, i18n } from \"webiny-app\";\nimport TitleInput from \"./components/editor/TitleInput\";\nimport PageContent from \"./components/editor/PageContent\";\n\nconst t = i18n.namespace(\"Cms.Admin.Views.PageEditor\");\n\nclass PageEditor extends React.Component {\n    filterContent({ content, ...model }, submit) {\n        model.content = content.map(widget => {\n            if (widget.origin) {\n                delete widget[\"data\"];\n                delete widget[\"settings\"];\n            }\n\n            return widget;\n        });\n\n        submit(model);\n    }\n\n    render() {\n        const { View, Link, Form, FormData, FormError, Icon, Loader } = this.props.modules;\n\n        return (\n            <FormData\n                withRouter\n                entity={\"CmsRevision\"}\n                defaultModel={{ content: [] }}\n                fields={\"id name active title slug content { id origin type data settings }\"}\n            >\n                {({ model, submit, error, loading }) => (\n                    <Form model={model} onSubmit={model => this.filterContent(model, submit)}>\n                        {({ submit, model, Bind }) => (\n                            <View.Form>\n                                {loading && <Loader />}\n                                <View.Header\n                                    render={({ props }) => (\n                                        <div\n                                            className={props.styles.viewHeader}\n                                            style={{ padding: \"20px 50px\" }}\n                                        >\n                                            <div className={props.styles.titleWrapper}>\n                                                <Bind>\n                                                    <TitleInput name={\"title\"} />\n                                                </Bind>\n                                            </div>\n                                            <div className={props.styles.titleRight}>\n                                                {props.children}\n                                            </div>\n                                            <div style={{ marginTop: 5 }}>\n                                                Revision: <strong>{model.name}</strong> ({model.active\n                                                    ? `active`\n                                                    : `inactive`})\n                                            </div>\n                                        </div>\n                                    )}\n                                >\n                                    <Link url={`/cms/preview/${model.id}`} type=\"secondary\" newTab>\n                                        <Icon icon={\"eye\"} /> {t`Preview`}\n                                    </Link>\n                                    <Link type=\"primary\" align=\"right\" onClick={submit}>\n                                        {t`Save page`}\n                                    </Link>\n                                </View.Header>\n                                {error && (\n                                    <View.Error>\n                                        <FormError error={error} />\n                                    </View.Error>\n                                )}\n                                <View.Body noPadding noColor style={{ paddingTop: 15 }}>\n                                    <Bind>\n                                        <PageContent name={\"content\"} />\n                                    </Bind>\n                                </View.Body>\n                            </View.Form>\n                        )}\n                    </Form>\n                )}\n            </FormData>\n        );\n    }\n}\n\nexport default createComponent(PageEditor, {\n    modules: [\n        \"List\",\n        \"View\",\n        \"Link\",\n        \"Icon\",\n        \"Input\",\n        \"Select\",\n        \"Grid\",\n        \"Modal\",\n        \"Loader\",\n        \"Tabs\",\n        \"Form\",\n        \"FormData\",\n        \"FormError\",\n        \"Button\"\n    ]\n});\n"]}