{"version":3,"sources":["../../../../../src/admin/views/pages/components/CreateRevisionDialog.jsx"],"names":["CreateRevisionDialog","props","page","data","modules","Modal","Button","Form","FormData","FormError","Input","Loader","hide","newModel","source","name","revisions","length","id","model","app","router","goToRoute","onSubmit","loading","error","form","Bind","submit","React","Component","ModalComponent"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;AAEA;;AACA;;;;IAEMA,oB;;;;;;;;;;iCACO;AAAA;;AAAA,yBAMD,KAAKC,KANJ;AAAA,gBAEDC,IAFC,UAEDA,IAFC;AAAA,gBAGDC,IAHC,UAGDA,IAHC;AAAA,wCAIDC,OAJC;AAAA,gBAIUC,KAJV,kBAIUA,KAJV;AAAA,gBAIiBC,MAJjB,kBAIiBA,MAJjB;AAAA,gBAIyBC,IAJzB,kBAIyBA,IAJzB;AAAA,gBAI+BC,QAJ/B,kBAI+BA,QAJ/B;AAAA,gBAIyCC,SAJzC,kBAIyCA,SAJzC;AAAA,gBAIoDC,KAJpD,kBAIoDA,KAJpD;AAAA,gBAI2DC,MAJ3D,kBAI2DA,MAJ3D;AAAA,gBAKDC,IALC,UAKDA,IALC;;;AAQL,gBAAMC,WAAW,oBAAOV,KAAKW,MAAZ,EAAoB,CAAC,OAAD,EAAU,MAAV,EAAkB,SAAlB,CAApB,CAAjB;AACAD,qBAASE,IAAT,GAAgB,gBAAgBb,KAAKc,SAAL,CAAeC,MAAf,GAAwB,CAAxC,CAAhB;AACAJ,qBAASX,IAAT,GAAgBA,KAAKgB,EAArB;;AAEA,mBACI;AAAC,qBAAD,CAAO,MAAP;AAAA;AACI;AAAC,4BAAD;AAAA;AACI,sCAAcL,QADlB;AAEI,gCAAQ,aAFZ;AAGI,gCAAQ,IAHZ;AAII,yCAAiB;AAAA,gCAAGM,KAAH,QAAGA,KAAH;AAAA,mCACbC,eAAIC,MAAJ,CAAWC,SAAX,CAAqB,iBAArB,EAAwC,EAAEJ,IAAIC,MAAMD,EAAZ,EAAxC,CADa;AAAA;AAJrB;AAQK;AAAA,4BAAGC,KAAH,SAAGA,KAAH;AAAA,4BAAUI,QAAV,SAAUA,QAAV;AAAA,4BAAoBC,OAApB,SAAoBA,OAApB;AAAA,4BAA6BC,KAA7B,SAA6BA,KAA7B;AAAA,+BACG;AAAC,gCAAD;AAAA,8BAAM,OAAON,KAAb,EAAoB,UAAUI,QAA9B;AACK;AAAA,oCAAGJ,KAAH,SAAGA,KAAH;AAAA,oCAAUO,IAAV,SAAUA,IAAV;AAAA,oCAAgBC,IAAhB,SAAgBA,IAAhB;AAAA,uCACG;AAAC,yCAAD,CAAO,OAAP;AAAA;AACKH,+CAAW,8BAAC,MAAD,OADhB;AAEI,kEAAC,KAAD,CAAO,MAAP,IAAc,OAAM,mBAApB,EAAwC,SAASZ,IAAjD,GAFJ;AAGI;AAAC,6CAAD,CAAO,IAAP;AAAA;AACKa,iDAAS,8BAAC,SAAD,IAAW,OAAOA,KAAlB,GADd;AAEI;AAAC,gDAAD;AAAA;AACI,0EAAC,KAAD;AACI,+DADJ;AAEI,uDAAO,eAFX;AAGI,4DAAY,UAHhB;AAII,6DAAa,uBAJjB;AAKI,sDAAM;AALV;AADJ;AAFJ,qCAHJ;AAeI;AAAC,6CAAD,CAAO,MAAP;AAAA,0CAAc,OAAM,OAApB;AACI,sEAAC,MAAD;AACI,kDAAK,SADT;AAEI,mDAAM,QAFV;AAGI,qDAAS,OAAKxB,KAAL,CAAWW;AAHxB,0CADJ;AAMI,sEAAC,MAAD;AACI,kDAAK,SADT;AAEI,mDAAM,QAFV;AAGI,qDAASc,KAAKE;AAHlB;AANJ;AAfJ,iCADH;AAAA;AADL,yBADH;AAAA;AARL;AADJ,aADJ;AA+CH;;;EA5D8BC,gBAAMC,S;;kBA+D1B,gCAAgB,CAAC9B,oBAAD,EAAuB+B,2BAAvB,CAAhB,EAAwD;AACnE3B,aAAS,CAAC,OAAD,EAAU,QAAV,EAAoB,MAApB,EAA4B,UAA5B,EAAwC,WAAxC,EAAqD,OAArD,EAA8D,QAA9D;AAD0D,CAAxD,C","file":"CreateRevisionDialog.js","sourcesContent":["import React from \"react\";\nimport _ from \"lodash\";\nimport { app, createComponent } from \"webiny-app\";\nimport { ModalComponent } from \"webiny-app-ui\";\n\nclass CreateRevisionDialog extends React.Component {\n    render() {\n        const {\n            page,\n            data,\n            modules: { Modal, Button, Form, FormData, FormError, Input, Loader },\n            hide\n        } = this.props;\n\n        const newModel = _.pick(data.source, [\"title\", \"slug\", \"content\"]);\n        newModel.name = \"Revision #\" + (page.revisions.length + 1);\n        newModel.page = page.id;\n\n        return (\n            <Modal.Dialog>\n                <FormData\n                    defaultModel={newModel}\n                    entity={\"CmsRevision\"}\n                    fields={\"id\"}\n                    onSubmitSuccess={({ model }) =>\n                        app.router.goToRoute(\"Cms.Page.Editor\", { id: model.id })\n                    }\n                >\n                    {({ model, onSubmit, loading, error }) => (\n                        <Form model={model} onSubmit={onSubmit}>\n                            {({ model, form, Bind }) => (\n                                <Modal.Content>\n                                    {loading && <Loader />}\n                                    <Modal.Header title=\"Create a revision\" onClose={hide} />\n                                    <Modal.Body>\n                                        {error && <FormError error={error} />}\n                                        <Bind>\n                                            <Input\n                                                autoFocus\n                                                label={\"Revision name\"}\n                                                validators={\"required\"}\n                                                placeholder={\"Enter a revision name\"}\n                                                name={\"name\"}\n                                            />\n                                        </Bind>\n                                    </Modal.Body>\n                                    <Modal.Footer align=\"right\">\n                                        <Button\n                                            type=\"default\"\n                                            label=\"Cancel\"\n                                            onClick={this.props.hide}\n                                        />\n                                        <Button\n                                            type=\"primary\"\n                                            label=\"Create\"\n                                            onClick={form.submit}\n                                        />\n                                    </Modal.Footer>\n                                </Modal.Content>\n                            )}\n                        </Form>\n                    )}\n                </FormData>\n            </Modal.Dialog>\n        );\n    }\n}\n\nexport default createComponent([CreateRevisionDialog, ModalComponent], {\n    modules: [\"Modal\", \"Button\", \"Form\", \"FormData\", \"FormError\", \"Input\", \"Loader\"]\n});\n"]}