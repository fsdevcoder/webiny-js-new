{"version":3,"sources":["../../src/utils/document.js"],"names":["DocumentUtils","url","Promise","document","querySelectorAll","length","s","createElement","type","src","async","onload","resolve","body","appendChild","rel","href","head","attributes","updatedExisting","name","element","querySelector","value","key","setAttribute","title"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;IAEMA,a;;;;;;;mCACSC,G,EAAK;AACZ,mBAAO,IAAIC,OAAJ,CAAY,mBAAW;AAC1B;AACA,oBAAIC,SAASC,gBAAT,kBAAyCH,GAAzC,SAAkDI,MAAlD,GAA2D,CAA/D,EAAkE;AAC9D;AACH;AACD,oBAAMC,IAAIH,SAASI,aAAT,CAAuB,QAAvB,CAAV;AACAD,kBAAEE,IAAF,GAAS,iBAAT;AACAF,kBAAEG,GAAF,GAAQR,GAAR;AACAK,kBAAEI,KAAF,GAAU,IAAV;AACAJ,kBAAEK,MAAF,GAAWC,OAAX;AACAT,yBAASU,IAAT,CAAcC,WAAd,CAA0BR,CAA1B;AACH,aAXM,CAAP;AAYH;;;uCAEcL,G,EAAK;AAChB,mBAAO,IAAIC,OAAJ,CAAY,mBAAW;AAC1B;AACA,oBAAIC,SAASC,gBAAT,mCAA0DH,GAA1D,SAAmEI,MAAnE,GAA4E,CAAhF,EAAmF;AAC/E;AACH;;AAED,oBAAMC,IAAIH,SAASI,aAAT,CAAuB,MAAvB,CAAV;AACAD,kBAAES,GAAF,GAAQ,YAAR;AACAT,kBAAEU,IAAF,GAASf,GAAT;AACAK,kBAAEK,MAAF,GAAWC,OAAX;AACAT,yBAASc,IAAT,CAAcH,WAAd,CAA0BR,CAA1B;AACH,aAXM,CAAP;AAYH;;;gCAEOY,U,EAAY;AAChB,gBAAIC,kBAAkB,KAAtB;AACA,gCAAO,CAAC,MAAD,EAAS,UAAT,CAAP,EAA6B,gBAAQ;AACjC,oBAAI,mBAAMD,UAAN,EAAkBE,IAAlB,CAAJ,EAA6B;AACzB;AACA,wBAAMC,WAAUlB,SAASmB,aAAT,WAA+BF,IAA/B,UAAwCF,WAAWE,IAAX,CAAxC,QAAhB;AACA,wBAAIC,QAAJ,EAAa;AACT;AACA,4CAAOH,UAAP,EAAmB,UAACK,KAAD,EAAQC,GAAR;AAAA,mCAAgBH,SAAQI,YAAR,CAAqBD,GAArB,EAA0BD,KAA1B,CAAhB;AAAA,yBAAnB;AACAJ,0CAAkB,IAAlB;AACA,+BAAO,KAAP;AACH;AACJ;AACJ,aAXD;;AAaA,gBAAIA,eAAJ,EAAqB;AACjB;AACH;;AAED;AACA,gBAAME,UAAUlB,SAASI,aAAT,CAAuB,MAAvB,CAAhB;AACA,gCAAOW,UAAP,EAAmB,UAACK,KAAD,EAAQC,GAAR;AAAA,uBAAgBH,QAAQI,YAAR,CAAqBD,GAArB,EAA0BD,KAA1B,CAAhB;AAAA,aAAnB;AACApB,qBAASc,IAAT,CAAcH,WAAd,CAA0BO,OAA1B;AACH;;;iCAEQK,K,EAAO;AACZvB,qBAASuB,KAAT,GAAiBA,KAAjB;AACH;;;;;kBAGU1B,a","file":"document.js","sourcesContent":["import _ from 'lodash';\n\nclass DocumentUtils {\n    loadScript(url) {\n        return new Promise(resolve => {\n            // Is it already inserted, possibly with server-side rendering?\n            if (document.querySelectorAll(`script[src=\"${url}\"]`).length > 0) {\n                return;\n            }\n            const s = document.createElement('script');\n            s.type = 'text/javascript';\n            s.src = url;\n            s.async = true;\n            s.onload = resolve;\n            document.body.appendChild(s);\n        });\n    }\n\n    loadStylesheet(url) {\n        return new Promise(resolve => {\n            // Is it already inserted, possibly with server-side rendering?\n            if (document.querySelectorAll(`link[rel=\"stylesheet\"][href=\"${url}\"]`).length > 0) {\n                return;\n            }\n\n            const s = document.createElement('link');\n            s.rel = 'stylesheet';\n            s.href = url;\n            s.onload = resolve;\n            document.head.appendChild(s);\n        });\n    }\n\n    setMeta(attributes) {\n        let updatedExisting = false;\n        _.each(['name', 'property'], name => {\n            if (_.has(attributes, name)) {\n                // Fetch existing element\n                const element = document.querySelector(`meta[${name}=\"${attributes[name]}\"]`);\n                if (element) {\n                    // If exists, update with new attributes\n                    _.each(attributes, (value, key) => element.setAttribute(key, value));\n                    updatedExisting = true;\n                    return false;\n                }\n            }\n        });\n\n        if (updatedExisting) {\n            return;\n        }\n\n        // Create new element\n        const element = document.createElement('meta');\n        _.each(attributes, (value, key) => element.setAttribute(key, value));\n        document.head.appendChild(element);\n    }\n\n    setTitle(title) {\n        document.title = title;\n    }\n}\n\nexport default DocumentUtils;"]}