{"version":3,"sources":["../../src/utils/createComponent.js"],"names":["hocCompose","components","reduce","Res","Cmp","createElement","props","options","Component","Array","isArray","name","defaultStyles","styles","ComponentWrapper","ref","component","c","modules","Object","keys","length","modulesProp","config","defaultProps","displayName","__originalComponent"],"mappings":"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","file":"createComponent.js","sourcesContent":["import React from \"react\";\nimport _ from \"lodash\";\nimport hoistNonReactStatics from \"hoist-non-react-statics\";\nimport LazyLoad from \"./../components/LazyLoad.cmp\";\n\nconst hocCompose = components => {\n    return props => {\n        return components.reduce((Res, Cmp) => {\n            if (!Res) {\n                return React.createElement(Cmp, props);\n            }\n\n            return React.createElement(Cmp, props, Res);\n        }, null);\n    };\n};\n\n/**\n * This function creates a wrapper class around given component to allow component styling and lazy loading of dependencies\n */\nexport default (components, options = {}) => {\n    const Component = Array.isArray(components) ? components[0] : components;\n    const name = Array.isArray(components) ? components[0].name : components.name;\n\n    // Create a copy of styles to use as default styles\n    let defaultStyles = { ...options.styles };\n\n    const createElement = hocCompose(Array.isArray(components) ? components : [components]);\n\n    class ComponentWrapper extends React.Component {\n        static configure(config) {\n            // defaultProps are merged\n            _.merge(ComponentWrapper.defaultProps, config.defaultProps || {});\n            delete config.defaultProps;\n\n            // modules are overwritten\n            if (_.hasIn(config, \"options.modules\")) {\n                ComponentWrapper.options.modules = config.options.modules;\n                delete config.options.modules;\n            }\n\n            // Merge the rest\n            _.merge(ComponentWrapper.options, config.options || {});\n\n            // Create new defaultStyles object to hold modified styles\n            defaultStyles = { ...ComponentWrapper.options.styles };\n        }\n\n        render() {\n            const props = _.omit(this.props, [\"styles\"]);\n            props.ref = c => (this.component = c);\n\n            props.styles = { ...defaultStyles };\n\n            // If new styles are given, merge them with default styles\n            if (_.isPlainObject(this.props.styles)) {\n                _.merge(props.styles, this.props.styles);\n            }\n\n            // If lazy loaded modules are defined - return LazyLoad wrapper\n            const modules = options.modules || {};\n            if (Object.keys(modules).length > 0) {\n                return (\n                    <LazyLoad modules={modules} options={{ props }}>\n                        {modules => {\n                            if (options.modulesProp) {\n                                props[options.modulesProp] = modules;\n                            } else {\n                                _.assign(props, modules);\n                            }\n                            return createElement(props);\n                        }}\n                    </LazyLoad>\n                );\n            }\n\n            return createElement(props);\n        }\n    }\n\n    ComponentWrapper.displayName = name + \"Wrapper\";\n    ComponentWrapper.__originalComponent = Component;\n    ComponentWrapper.options = options;\n    ComponentWrapper.defaultProps = _.assign({}, Component.defaultProps);\n\n    return hoistNonReactStatics(ComponentWrapper, Component);\n};\n"]}