{"version":3,"sources":["../../src/components/ApiComponent.cmp.js"],"names":["apiProps","getApiProps","res","Object","keys","props","map","includes","key","ApiComponent","api","config","query","apiUrl","defaults","url","create","method","baseURL","params","data","body","cloneElement","children","Component"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;AAEA;;;;;;AAEA,IAAMA,WAAW,CACb,QADa,EAEb,MAFa,EAGb,SAHa,EAIb,MAJa,EAKb,cALa,EAMb,aANa,EAOb,gBAPa,CAAjB;;AAUA,IAAMC,cAAc,SAAdA,WAAc,QAAS;AACzB,QAAMC,MAAM,EAAZ;AACAC,WAAOC,IAAP,CAAYC,KAAZ,EAAmBC,GAAnB,CAAuB,eAAO;AAC1B,YAAIN,SAASO,QAAT,CAAkBC,GAAlB,CAAJ,EAA4B;AACxBN,sBAAQM,GAAR,IAAiBH,MAAMG,GAAN,CAAjB;AACH;AACJ,KAJD;;AAMA,WAAON,GAAP;AACH,CATD;;IAWMO,Y;;;AACF,0BAAYJ,KAAZ,EAAmB;AAAA;;AAAA,8IACTA,KADS;;AAGf,YAAIA,MAAMK,GAAV,EAAe;AACX,gBAAMC,SAAS,oBAAON,KAAP,EAAc,CAAC,QAAD,EAAW,KAAX,EAAkB,MAAlB,EAA0B,OAA1B,CAAd,CAAf;AACA,gBAAI,CAACM,OAAOC,KAAR,IAAiB,6BAAgBD,OAAOC,KAAvB,CAArB,EAAoD;AAChDD,uBAAOC,KAAP,GAAe,qBAAQ,EAAR,EAAYD,OAAOC,KAAnB,EAA0BX,YAAYI,KAAZ,CAA1B,CAAf;AACH;;AAED,gBAAMQ,SAAS,OAAOR,MAAMK,GAAb,KAAqB,QAArB,GAAgCL,MAAMK,GAAtC,GAA4CL,MAAMK,GAAN,CAAUI,QAAV,CAAmBC,GAA9E;AACA,kBAAKL,GAAL,GAAW,gBAAMM,MAAN,CAAa;AACpBC,wBAAQN,OAAOM,MAAP,IAAiB,KADL;AAEpBC,yBAAS,gBAAMJ,QAAN,CAAeI,OAFJ;AAGpBH,qBAAKJ,OAAOI,GAAP,GAAaF,SAASF,OAAOI,GAA7B,GAAmCF,MAHpB;AAIpBM,wBAAQR,OAAOC,KAJK;AAKpBQ,sBAAMT,OAAOU;AALO,aAAb,CAAX;AAOH;AAjBc;AAkBlB;;;;iCAEQ;AACL,mBAAO,gBAAMC,YAAN,CAAmB,KAAKjB,KAAL,CAAWkB,QAA9B,oBACA,oBAAO,KAAKlB,KAAZ,EAAmB,UAAnB,CADA;AAEHK,qBAAK,KAAKA;AAFP,eAAP;AAIH;;;EA1BsB,gBAAMc,S;;kBA6BlBf,Y","file":"ApiComponent.cmp.js","sourcesContent":["import React from \"react\";\nimport _ from \"lodash\";\nimport axios from \"axios\";\n\nconst apiProps = [\n    \"fields\",\n    \"page\",\n    \"perPage\",\n    \"sort\",\n    \"searchFields\",\n    \"searchQuery\",\n    \"searchOperator\"\n];\n\nconst getApiProps = props => {\n    const res = {};\n    Object.keys(props).map(key => {\n        if (apiProps.includes(key)) {\n            res[`_${key}`] = props[key];\n        }\n    });\n\n    return res;\n};\n\nclass ApiComponent extends React.Component {\n    constructor(props) {\n        super(props);\n\n        if (props.api) {\n            const config = _.pick(props, [\"method\", \"url\", \"body\", \"query\"]);\n            if (!config.query || _.isPlainObject(config.query)) {\n                config.query = _.merge({}, config.query, getApiProps(props));\n            }\n\n            const apiUrl = typeof props.api === \"string\" ? props.api : props.api.defaults.url;\n            this.api = axios.create({\n                method: config.method || \"get\",\n                baseURL: axios.defaults.baseURL,\n                url: config.url ? apiUrl + config.url : apiUrl,\n                params: config.query,\n                data: config.body\n            });\n        }\n    }\n\n    render() {\n        return React.cloneElement(this.props.children, {\n            ..._.omit(this.props, \"children\"),\n            api: this.api\n        });\n    }\n}\n\nexport default ApiComponent;\n"]}