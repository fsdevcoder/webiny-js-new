{"version":3,"sources":["../../src/entities/user.entity.js"],"names":["User","constructor","attr","char","setValidators","onSet","value","toLowerCase","trim","password","dynamic","then","md5","email","boolean","setDefaultValue","classId","tableName"],"mappings":";;;;;;;;;;AACA;;;;;;AAEA,MAAMA,IAAN,4BAA4B;AACxBC,kBAAc;AACV;;AAEA,aAAKC,IAAL,CAAU,OAAV,EACKC,IADL,GAEKC,aAFL,CAEmB,gBAFnB,EAGKC,KAHL,CAGWC,SAASA,MAAMC,WAAN,GAAoBC,IAApB,EAHpB;;AAKA,aAAKN,IAAL,CAAU,UAAV,EAAsBO,QAAtB;AACA,aAAKP,IAAL,CAAU,WAAV,EAAuBC,IAAvB;AACA,aAAKD,IAAL,CAAU,UAAV,EAAsBC,IAAtB;AACA,aAAKD,IAAL,CAAU,UAAV,EAAsBQ,OAAtB,CAA8B,MAAM,+CAAO,KAAP,GAAcC,IAAd,CAAmBC,OAAOA,IAAI,KAAKC,KAAT,CAA1B,CAApC;AACA,aAAKX,IAAL,CAAU,SAAV,EACKY,OADL,GAEKC,eAFL,CAEqB,IAFrB;AAGA;AACA;AACH;AAlBuB;;;AAqB5Bf,KAAKgB,OAAL,GAAe,eAAf;AACAhB,KAAKiB,SAAL,GAAiB,gBAAjB;;kBAEejB,I","file":"user.entity.js","sourcesContent":["// @flow\nimport Identity from \"./identity.entity\";\n\nclass User extends Identity {\n    constructor() {\n        super();\n\n        this.attr(\"email\")\n            .char()\n            .setValidators(\"required,email\")\n            .onSet(value => value.toLowerCase().trim());\n\n        this.attr(\"password\").password();\n        this.attr(\"firstName\").char();\n        this.attr(\"lastName\").char();\n        this.attr(\"gravatar\").dynamic(() => import(\"md5\").then(md5 => md5(this.email)));\n        this.attr(\"enabled\")\n            .boolean()\n            .setDefaultValue(true);\n        // TODO: 2FactorAuth\n        // TODO: Password recovery\n    }\n}\n\nUser.classId = \"Security.User\";\nUser.tableName = \"Security_Users\";\n\nexport default User;\n"]}