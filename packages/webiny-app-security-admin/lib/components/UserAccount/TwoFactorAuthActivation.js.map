{"version":3,"sources":["../../../src/components/UserAccount/TwoFactorAuthActivation.js"],"names":["t","namespace","TwoFactorAuthActivation","props","Ui","onCancel","onConfirm","formProps","api","fields","onSuccessMessage","onSubmitSuccess","response","data","result","services","get","danger","form","submit","Component","modulesProp","modules"],"mappings":"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","file":"TwoFactorAuthActivation.js","sourcesContent":["import React from \"react\";\nimport { app, createComponent, i18n } from \"webiny-app\";\nimport { ModalConfirmationComponent } from \"webiny-app-ui\";\n\nconst t = i18n.namespace(\"Webiny.Skeleton.UserAccount.TwoFactorAuthActivation\");\nclass TwoFactorAuthActivation extends React.Component {\n    render() {\n        const { Ui, onCancel, onConfirm } = this.props;\n\n        const formProps = {\n            api: \"/security/auth/2factor-verify\",\n            fields: \"id,title\",\n            onSuccessMessage: null,\n            onSubmitSuccess: ({ response }) => {\n                if (response.data.data.result) {\n                    onConfirm();\n                } else {\n                    app.services.get(\"growler\").danger(t`The code doesn't match`);\n                }\n            }\n        };\n\n        return (\n            <Ui.Modal.Dialog>\n                <Ui.Form {...formProps}>\n                    {({ form }) => (\n                        <Ui.Modal.Content>\n                            <Ui.Modal.Header title={t`2Factor Auth`} onClose={onCancel} />\n                            <Ui.Modal.Body>\n                                <Ui.Grid.Row>\n                                    <Ui.Grid.Col all={6}>\n                                        <Ui.Section title={t`Step 1`} />\n                                        <p>\n                                            {t`Install the Google Authenticator iOS or Android app:`}\n                                            <br />\n                                        </p>\n                                        <p>\n                                            <Ui.Link url=\"https://itunes.apple.com/us/app/google-authenticator/id388497605?mt=8\">\n                                                <Ui.Icon icon=\"fa-apple\" /> {t`iOS download`}\n                                            </Ui.Link>\n                                            <br />\n                                            <Ui.Link url=\"https://play.google.com/store/apps/details?id=com.google.android.apps.authenticator2&hl=en\">\n                                                <Ui.Icon icon=\"fa-android\" /> {t`Android download`}\n                                            </Ui.Link>\n                                        </p>\n                                    </Ui.Grid.Col>\n\n                                    <Ui.Grid.Col all={6}>\n                                        <Ui.Section title={t`Step 2`} />\n                                        <p>\n                                            {t`Scan the QR code below with the authenticator app`}\n                                        </p>\n                                        {/*<Ui.Data api=\"/security/auth/2factor-qr\" waitForData={true}>\n                                            {({ data }) => (\n                                                <Ui.Grid.Col all={12} className=\"text-center\">\n                                                    <img src={data.qrCode}/>\n                                                </Ui.Grid.Col>\n                                            )}\n                                        </Ui.Data>*/}\n                                    </Ui.Grid.Col>\n                                </Ui.Grid.Row>\n                                <Ui.Grid.Row>\n                                    <Ui.Grid.Col all={12}>\n                                        <Ui.Section title={t`Step 3`} />\n                                        <Ui.Grid.Col all={12}>\n                                            <Ui.Input\n                                                label={t`Enter the generated code in the field below:`}\n                                                name=\"verification\"\n                                                validators=\"required\"\n                                            />\n                                        </Ui.Grid.Col>\n                                    </Ui.Grid.Col>\n                                </Ui.Grid.Row>\n                            </Ui.Modal.Body>\n                            <Ui.Modal.Footer>\n                                <Ui.Button type=\"default\" label={t`Cancel`} onClick={onCancel} />\n                                <Ui.Button type=\"primary\" label={t`Verify`} onClick={form.submit} />\n                            </Ui.Modal.Footer>\n                        </Ui.Modal.Content>\n                    )}\n                </Ui.Form>\n            </Ui.Modal.Dialog>\n        );\n    }\n}\n\nexport default createComponent([TwoFactorAuthActivation, ModalConfirmationComponent], {\n    modulesProp: \"Ui\",\n    modules: [\"Modal\", \"Data\", \"Grid\", \"Button\", \"Section\", \"Form\", \"Input\", \"Link\", \"Icon\"]\n});\n"]}