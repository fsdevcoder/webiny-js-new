{"version":3,"sources":["../../../src/components/Gallery/Image.jsx"],"names":["Image","props","map","m","bind","e","stopPropagation","onEdit","onDelete","render","call","Link","image","styles","title","name","cacheBust","modifiedOn","data","Date","getTime","draggable","index","onDragStart","onDragEnd","onDragOver","editBtn","editImage","fileEdit","file","filePreview","src","deleteImage","fileRemove","fileName","fileSize","id","size","Component","modules"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;AAEA;;AACA;;;;AACA;;;;;;IAEMA,K;;;AAEF,mBAAYC,KAAZ,EAAmB;AAAA;;AAAA,gIACTA,KADS;;AAGf,SAAC,WAAD,EAAc,aAAd,EAA6BC,GAA7B,CAAiC;AAAA,mBAAK,MAAKC,CAAL,IAAU,MAAKA,CAAL,EAAQC,IAAR,OAAf;AAAA,SAAjC;AAHe;AAIlB;;;;kCAESC,C,EAAG;AACTA,cAAEC,eAAF;AACA,iBAAKL,KAAL,CAAWM,MAAX;AACH;;;oCAEWF,C,EAAG;AACXA,cAAEC,eAAF;AACA,iBAAKL,KAAL,CAAWO,QAAX;AACH;;;iCAEQ;AACL,gBAAI,KAAKP,KAAL,CAAWQ,MAAf,EAAuB;AACnB,uBAAO,KAAKR,KAAL,CAAWQ,MAAX,CAAkBC,IAAlB,CAAuB,IAAvB,CAAP;AACH;;AAHI,yBAK2B,KAAKT,KALhC;AAAA,gBAKGU,IALH,UAKGA,IALH;AAAA,gBAKSC,KALT,UAKSA,KALT;AAAA,gBAKgBC,MALhB,UAKgBA,MALhB;;AAML,gBAAMC,QAAQF,MAAME,KAAN,IAAeF,MAAMG,IAArB,IAA6B,EAA3C;AACA,gBAAIC,YAAY,EAAhB;AACA,gBAAIJ,MAAMK,UAAN,IAAoB,CAACL,MAAMM,IAA/B,EAAqC;AACjCF,4BAAY,SAAS,IAAIG,IAAJ,CAASP,MAAMK,UAAf,EAA2BG,OAA3B,EAArB;AACH;;AAED,gBAAMC,YAAY;AACd,2BAAW,KAAKpB,KAAL,CAAWqB,KADR;AAEdD,2BAAW,IAFG;AAGdE,6BAAa,KAAKtB,KAAL,CAAWsB,WAHV;AAIdC,2BAAW,KAAKvB,KAAL,CAAWuB,SAJR;AAKdC,4BAAY,KAAKxB,KAAL,CAAWwB;AALT,aAAlB;;AAQA,gBAAIC,UAAU,IAAd;AACA,gBAAI,CAAC,mBAAMd,KAAN,EAAa,UAAb,CAAL,EAA+B;AAC3Bc,0BAAU,8BAAC,IAAD,IAAM,SAAS,KAAKC,SAApB,EAA+B,WAAWd,OAAOe,QAAjD,GAAV;AACH;;AAED,mBACI;AAAA;AAAA,yCAAK,WAAWf,OAAOgB,IAAvB,IAAiCR,SAAjC,IAA4C,aAAU,OAAtD;AACI;AACI,+BAAWR,OAAOiB,WADtB;AAEI,yBAAKlB,MAAMM,IAAN,IAAcN,MAAMmB,GAAN,GAAYf,SAFnC;AAGI,yBAAKF,KAHT;AAII,2BAAOA,KAJX;AAKI,2BAAM,KALV;AAMI,4BAAO,KANX,GADJ;AAQKY,uBARL;AASI,8CAAC,IAAD,IAAM,SAAS,KAAKM,WAApB,EAAiC,WAAWnB,OAAOoB,UAAnD,GATJ;AAUI;AAAA;AAAA,sBAAM,WAAWpB,OAAOqB,QAAxB;AAAmCtB,0BAAMG;AAAzC,iBAVJ;AAWI;AAAA;AAAA,sBAAM,WAAWF,OAAOsB,QAAxB;AAAmCvB,0BAAMwB,EAAN,GAAW,wBAASxB,MAAMyB,IAAf,CAAX,GAAkC;AAArE;AAXJ,aADJ;AAeH;;;EA1De,gBAAMC,S;;kBA6DX,gCAAgBtC,KAAhB,EAAuB,EAAEuC,SAAS,CAAC,MAAD,CAAX,EAAqB1B,wBAArB,EAAvB,C","file":"Image.js","sourcesContent":["import React from 'react';\nimport _ from 'lodash';\nimport { createComponent } from 'webiny-app';\nimport filesize from 'filesize';\nimport styles from './styles.css';\n\nclass Image extends React.Component {\n\n    constructor(props) {\n        super(props);\n\n        ['editImage', 'deleteImage'].map(m => this[m] = this[m].bind(this));\n    }\n\n    editImage(e) {\n        e.stopPropagation();\n        this.props.onEdit();\n    }\n\n    deleteImage(e) {\n        e.stopPropagation();\n        this.props.onDelete();\n    }\n\n    render() {\n        if (this.props.render) {\n            return this.props.render.call(this);\n        }\n\n        const { Link, image, styles } = this.props;\n        const title = image.title || image.name || '';\n        let cacheBust = '';\n        if (image.modifiedOn && !image.data) {\n            cacheBust = '?ts=' + new Date(image.modifiedOn).getTime();\n        }\n\n        const draggable = {\n            'data-id': this.props.index,\n            draggable: true,\n            onDragStart: this.props.onDragStart,\n            onDragEnd: this.props.onDragEnd,\n            onDragOver: this.props.onDragOver\n        };\n\n        let editBtn = null;\n        if (!_.has(image, 'progress')) {\n            editBtn = <Link onClick={this.editImage} className={styles.fileEdit}/>;\n        }\n\n        return (\n            <div className={styles.file} {...draggable} data-role=\"image\">\n                <img\n                    className={styles.filePreview}\n                    src={image.data || image.src + cacheBust}\n                    alt={title}\n                    title={title}\n                    width=\"133\"\n                    height=\"133\"/>\n                {editBtn}\n                <Link onClick={this.deleteImage} className={styles.fileRemove}/>\n                <span className={styles.fileName}>{image.name}</span>\n                <span className={styles.fileSize}>{image.id ? filesize(image.size) : '-'}</span>\n            </div>\n        );\n    }\n}\n\nexport default createComponent(Image, { modules: ['Link'], styles });"]}