{"version":3,"sources":["../../../src/components/Growl/GrowlContainer.jsx"],"names":["GrowlContainer","props","state","growls","dom","addGrowl","bind","removeGrowl","removeById","onComponentDidMount","growl","growlIndex","id","g","cloneElement","push","setState","refs","animate","opacity","type","easeOut","duration","complete","index","item","splice","render","call","topRight","notification","map","ref","onRef","key","onRemove","Component","defaultProps","styles"],"mappings":"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","file":"GrowlContainer.js","sourcesContent":["import React from 'react';\nimport _ from 'lodash';\nimport classSet from \"classnames\";\nimport dynamics from 'dynamics.js';\nimport { createComponent } from 'webiny-app';\nimport styles from './styles.css';\n\nclass GrowlContainer extends React.Component {\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            growls: []\n        };\n\n        this.dom = {};\n        this.addGrowl = this.addGrowl.bind(this);\n        this.removeGrowl = this.removeGrowl.bind(this);\n        this.removeById = this.removeById.bind(this);\n    }\n\n    componentDidMount() {\n        this.props.onComponentDidMount(this);\n    }\n\n    addGrowl(growl) {\n        let growlIndex = -1;\n        if (growl.props.id) {\n            growlIndex = _.findIndex(this.state.growls, g => g.props.id === growl.props.id);\n        }\n\n        if (growlIndex > -1) {\n            this.state.growls[growlIndex] = growl;\n        } else {\n            if (!growl.props.id) {\n                growl = React.cloneElement(growl, { id: _.uniqueId('growl-') });\n            }\n            this.state.growls.push(growl);\n        }\n        this.setState({ growls: this.state.growls });\n        return growl.props.id;\n    }\n\n    removeById(id) {\n        this.refs[id] && this.removeGrowl(this.refs[id]);\n    }\n\n    removeGrowl(growl) {\n        const id = growl.props.id;\n\n        dynamics.animate(this.dom[id], {\n            opacity: 0\n        }, {\n            type: dynamics.easeOut,\n            duration: 400,\n            complete: () => {\n                const index = _.findIndex(this.state.growls, item => item.props.id === id);\n                this.state.growls.splice(index, 1);\n                this.setState({ growls: this.state.growls });\n            }\n        });\n    }\n\n    render() {\n        if (this.props.render) {\n            return this.props.render.call(this);\n        }\n\n        return (\n            <div className={classSet(styles.growl, styles.topRight)}>\n                <div className={styles.notification}/>\n                {this.state.growls.map(growl => {\n                    return React.cloneElement(growl, {\n                        ref: growl.props.id,\n                        onRef: ref => this.dom[growl.props.id] = ref,\n                        key: growl.props.id,\n                        onRemove: this.removeGrowl\n                    });\n                })}\n            </div>\n        );\n    }\n}\n\nGrowlContainer.defaultProps = {\n    onComponentDidMount: _.noop\n};\n\nexport default createComponent(GrowlContainer, { styles });"]}