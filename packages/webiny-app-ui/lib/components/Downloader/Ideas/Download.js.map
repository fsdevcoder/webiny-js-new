{"version":3,"sources":["../../../../src/components/Downloader/Ideas/Download.jsx"],"names":["Ui","Components","Download","props","hasDialog","state","showDialog","bindMethods","setState","download","refs","downloader","Component","defaultProps","renderer","Children","map","children","isElementOfType","child","Element","elementDownload","Dialog","show","onHidden","cloneElement"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAAA;;;;AACA;;;;AACA,IAAMA,KAAK,kBAAOA,EAAP,CAAUC,UAArB;;IAEMC,Q;;;AACF,sBAAYC,KAAZ,EAAmB;AAAA;;AAAA,sIACTA,KADS;;AAGf,cAAKC,SAAL,GAAiB,KAAjB;AACA,cAAKC,KAAL,GAAa;AACTC,wBAAY;AADH,SAAb;;AAIA,cAAKC,WAAL,CAAiB,0BAAjB;AARe;AASlB;;;;0CAE0B;AACvB,gBAAI,KAAKH,SAAT,EAAoB;AAChB,uBAAO,KAAKI,QAAL,CAAc,EAACF,YAAY,IAAb,EAAd,CAAP;AACH;;AAED,mBAAO,KAAKG,QAAL,uBAAP;AACH;;;mCAEmB;AAAA;;AAChB,mBAAO,yBAAKC,IAAL,CAAUC,UAAV,EAAqBF,QAArB,mCAAP;AACH;;;EAtBkB,kBAAOT,EAAP,CAAUY,S;;AA0BjCV,SAASW,YAAT,GAAwB;AACpBC,YADoB,sBACT;AAAA;;AACP,eACI;AAAA;AAAA;AACK,4BAAMC,QAAN,CAAeC,GAAf,CAAmB,KAAKb,KAAL,CAAWc,QAA9B,EAAwC,iBAAS;AAC9C,oBAAMd,QAAQ,EAAd;AACA,oBAAI,kBAAOe,eAAP,CAAuBC,KAAvB,EAA8BnB,GAAGE,QAAH,CAAYkB,OAA1C,CAAJ,EAAwD;AACpDjB,0BAAMM,QAAN,GAAiB,OAAKY,eAAtB;AACH;;AAED,oBAAI,kBAAOH,eAAP,CAAuBC,KAAvB,EAA8BnB,GAAGE,QAAH,CAAYoB,MAA1C,CAAJ,EAAuD;AACnD,2BAAKlB,SAAL,GAAiB,IAAjB;AACAD,0BAAMM,QAAN,GAAiB,OAAKA,QAAtB;AACAN,0BAAMoB,IAAN,GAAa,OAAKlB,KAAL,CAAWC,UAAxB;AACAH,0BAAMqB,QAAN,GAAiB;AAAA,+BAAM,OAAKhB,QAAL,CAAc,EAACF,YAAY,KAAb,EAAd,CAAN;AAAA,qBAAjB;AACH;AACD,uBAAO,gBAAMmB,YAAN,CAAmBN,KAAnB,EAA0BhB,KAA1B,CAAP;AACH,aAbA,CADL;AAeI,0CAAC,EAAD,CAAI,UAAJ,IAAe,KAAI,YAAnB;AAfJ,SADJ;AAmBH;AArBmB,CAAxB;;kBAwBeD,Q","file":"Download.js","sourcesContent":["import React from 'react';\nimport {Webiny} from 'webiny-app';\nconst Ui = Webiny.Ui.Components;\n\nclass Download extends Webiny.Ui.Component {\n    constructor(props) {\n        super(props);\n\n        this.hasDialog = false;\n        this.state = {\n            showDialog: false\n        };\n\n        this.bindMethods('elementDownload,download');\n    }\n\n    elementDownload(...params) {\n        if (this.hasDialog) {\n            return this.setState({showDialog: true});\n        }\n\n        return this.download(...params);\n    }\n\n    download(...params) {\n        return this.refs.downloader.download(...params);\n    }\n\n}\n\nDownload.defaultProps = {\n    renderer() {\n        return (\n            <webiny-download>\n                {React.Children.map(this.props.children, child => {\n                    const props = {};\n                    if (Webiny.isElementOfType(child, Ui.Download.Element)) {\n                        props.download = this.elementDownload;\n                    }\n\n                    if (Webiny.isElementOfType(child, Ui.Download.Dialog)) {\n                        this.hasDialog = true;\n                        props.download = this.download;\n                        props.show = this.state.showDialog;\n                        props.onHidden = () => this.setState({showDialog: false});\n                    }\n                    return React.cloneElement(child, props);\n                })}\n                <Ui.Downloader ref=\"downloader\"/>\n            </webiny-download>\n        );\n    }\n};\n\nexport default Download;"]}