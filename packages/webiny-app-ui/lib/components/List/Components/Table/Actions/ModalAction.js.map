{"version":3,"sources":["../../../../../../src/components/List/Components/Table/Actions/ModalAction.jsx"],"names":["ModalAction","props","render","call","hide","data","Icon","Link","Downloader","download","httpMethod","url","params","downloader","dialog","modal","children","actions","Promise","resolve","icon","show","label","cloneElement","onReady","ref","Component","defaultProps","modules"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;AAEA;;;;IAEMA,W;;;;;;;;;;iCACO;AAAA;;AACL,gBAAI,KAAKC,KAAL,CAAWC,MAAf,EAAuB;AACnB,uBAAO,KAAKD,KAAL,CAAWC,MAAX,CAAkBC,IAAlB,CAAuB,IAAvB,CAAP;AACH;;AAED,gBAAI,0BAAa,KAAKF,KAAL,CAAWG,IAAxB,KAAiC,KAAKH,KAAL,CAAWG,IAAX,CAAgB,KAAKH,KAAL,CAAWI,IAA3B,CAArC,EAAuE;AACnE,uBAAO,IAAP;AACH;;AAPI,yBAS8B,KAAKJ,KATnC;AAAA,gBASGK,IATH,UASGA,IATH;AAAA,gBASSC,IATT,UASSA,IATT;AAAA,gBASeC,UATf,UASeA,UATf;;;AAWL,gBAAMC,WAAW,SAAXA,QAAW,CAACC,UAAD,EAAaC,GAAb,EAAoC;AAAA,oBAAlBC,MAAkB,uEAAT,IAAS;;AACjD,uBAAKC,UAAL,CAAgBJ,QAAhB,CAAyBC,UAAzB,EAAqCC,GAArC,EAA0CC,MAA1C;AACA,uBAAKE,MAAL,CAAYV,IAAZ;AACH,aAHD;;AAKA,gBAAMW,QAAQ,KAAKd,KAAL,CAAWe,QAAX,CAAoBb,IAApB,CAAyB,IAAzB,EAA+B;AACzCE,sBAAM,KAAKJ,KAAL,CAAWI,IADwB;AAEzCY,yBAAS,KAAKhB,KAAL,CAAWgB,OAFqB;AAGzCR,kCAHyC;AAIzCK,wBAAQ;AACJV,0BAAM,gBAAM;AACR,4BAAI,OAAKU,MAAT,EAAiB;AACb,mCAAO,OAAKA,MAAL,CAAYV,IAAZ,EAAP;AACH;AACD,+BAAOc,QAAQC,OAAR,CAAgB,IAAhB,CAAP;AACH;AANG;AAJiC,aAA/B,CAAd;;AAcA,gBAAMC,OAAO,KAAKnB,KAAL,CAAWmB,IAAX,GAAkB,8BAAC,IAAD,IAAM,MAAM,KAAKnB,KAAL,CAAWmB,IAAvB,GAAlB,GAAmD,IAAhE;;AAEA,mBACI;AAAC,oBAAD;AAAA,kBAAM,SAAS;AAAA,+BAAM,OAAKN,MAAL,CAAYO,IAAZ,EAAN;AAAA,qBAAf;AACKD,oBADL;AAEK,qBAAKnB,KAAL,CAAWqB,KAFhB;AAGK,gCAAMC,YAAN,CAAmBR,KAAnB,EAA0B,EAAES,SAAS;AAAA,+BAAU,OAAKV,MAAL,GAAcA,MAAxB;AAAA,qBAAX,EAA1B,CAHL;AAII,8CAAC,UAAD,IAAY,KAAK;AAAA,+BAAO,OAAKD,UAAL,GAAkBY,IAAzB;AAAA,qBAAjB;AAJJ,aADJ;AAQH;;;EAzCqB,gBAAMC,S;;AA4ChC1B,YAAY2B,YAAZ,GAA2B;AACvBtB,UAAM,IADiB;AAEvBY,aAAS,IAFc;AAGvBb,wBAHuB;AAIvBK,cAAU;AAJa,CAA3B;;kBAOe,gCAAgBT,WAAhB,EAA6B,EAAE4B,SAAS,CAAC,MAAD,EAAS,MAAT,EAAiB,YAAjB,CAAX,EAA7B,C","file":"ModalAction.js","sourcesContent":["import React from 'react';\nimport _ from 'lodash';\nimport { createComponent } from 'webiny-app';\n\nclass ModalAction extends React.Component {\n    render() {\n        if (this.props.render) {\n            return this.props.render.call(this);\n        }\n\n        if (_.isFunction(this.props.hide) && this.props.hide(this.props.data)) {\n            return null;\n        }\n\n        const { Icon, Link, Downloader } = this.props;\n\n        const download = (httpMethod, url, params = null) => {\n            this.downloader.download(httpMethod, url, params);\n            this.dialog.hide();\n        };\n\n        const modal = this.props.children.call(this, {\n            data: this.props.data,\n            actions: this.props.actions,\n            download,\n            dialog: {\n                hide: () => {\n                    if (this.dialog) {\n                        return this.dialog.hide();\n                    }\n                    return Promise.resolve(true);\n                }\n            }\n        });\n\n        const icon = this.props.icon ? <Icon icon={this.props.icon}/> : null;\n\n        return (\n            <Link onClick={() => this.dialog.show()}>\n                {icon}\n                {this.props.label}\n                {React.cloneElement(modal, { onReady: dialog => this.dialog = dialog })}\n                <Downloader ref={ref => this.downloader = ref}/>\n            </Link>\n        );\n    }\n}\n\nModalAction.defaultProps = {\n    data: null,\n    actions: null,\n    hide: _.noop,\n    download: false\n};\n\nexport default createComponent(ModalAction, { modules: ['Icon', 'Link', 'Downloader'] });"]}