{"version":3,"sources":["../../../../../src/components/List/Components/Table/Row.jsx"],"names":["Row","props","fields","actionsElement","selectRowElement","data","map","m","bind","prepareChildren","children","attachToTable","index","disabled","child","tableField","hide","push","tableActions","cloneElement","actions","Children","prepareChild","field","i","name","label","key","sorted","sorters","rowIndex","rowDetailsExpanded","expanded","rowSelected","selected","rowDisabled","isDisabled","onSelect","value","onSelectAll","childrenArray","fieldChild","length","onClick","toggleRowDetails","call","$this","render","splice","classes","className","renderField","actionsClass","Component","defaultProps","styles"],"mappings":"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","file":"Row.js","sourcesContent":["import React from 'react';\nimport _ from 'lodash';\nimport classSet from \"classnames\";\nimport { createComponent, isElementOfType, elementHasFlag } from 'webiny-app';\nimport SelectRowField from './Fields/SelectRowField';\nimport Actions from './Actions';\nimport FieldInfo from './FieldInfo';\nimport styles from '../../styles.css';\n\nclass Row extends React.Component {\n\n    constructor(props) {\n        super(props);\n\n        this.fields = [];\n        this.actionsElement = null;\n        this.selectRowElement = null;\n        this.data = props.data;\n\n        ['prepareChildren', 'prepareChild', 'renderField', 'onClick', 'isDisabled'].map(m => this[m] = this[m].bind(this));\n    }\n\n    componentWillMount() {\n        this.prepareChildren(this.props.children);\n        if (this.props.attachToTable) {\n            this.props.attachToTable(this, this.props.index);\n        }\n    }\n\n    componentWillReceiveProps(props) {\n        this.data = props.data;\n        this.prepareChildren(props.children);\n        if (this.props.attachToTable) {\n            this.props.attachToTable(this, props.index);\n        }\n    }\n\n    isDisabled() {\n        const { disabled } = this.props;\n        return _.isFunction(disabled) ? disabled(this.props.data) : disabled;\n    }\n\n    prepareChild(child) {\n        if (typeof child !== 'object' || child === null) {\n            return child;\n        }\n\n        const tableField = elementHasFlag(child, 'tableField');\n        if (tableField) {\n            if (isElementOfType(child, SelectRowField)) {\n                this.selectRowElement = true;\n            }\n\n            // Only evaluate `hide` condition if it is a plain value (not a function)\n            if (!_.isFunction(child.props.hide) && child.props.hide) {\n                return;\n            }\n\n            this.fields.push(child);\n            return;\n        }\n\n        const tableActions = isElementOfType(child, Actions);\n        if (tableActions && !child.props.hide) {\n            this.actionsElement = React.cloneElement(child, {\n                data: this.data,\n                actions: this.props.actions\n            });\n        }\n    }\n\n    prepareChildren(children) {\n        this.fields = [];\n        this.actionsElement = null;\n\n        if (typeof children !== 'object' || children === null) {\n            return children;\n        }\n        return React.Children.map(children, this.prepareChild);\n    }\n\n    renderField(field, i) {\n        const props = _.omit(field.props, ['children']);\n        _.assign(props, {\n            data: this.data,\n            name: props.name,\n            label: props.label,\n            key: i,\n            sorted: this.props.sorters[props.name] || null,\n            actions: this.props.actions,\n            rowIndex: this.props.index,\n            rowDetailsExpanded: this.props.expanded,\n            rowSelected: this.props.selected,\n            rowDisabled: this.isDisabled(),\n            onSelect: value => this.props.onSelect(this.props.data, value),\n            onSelectAll: value => this.props.onSelectAll(value)\n        });\n\n        // Filter Field children\n        const childrenArray = _.isArray(field.props.children) ? field.props.children : [field.props.children];\n        const children = [];\n        _.filter(childrenArray).map(fieldChild => {\n            // Do not include FieldInfo in Field children\n            if (!isElementOfType(fieldChild, FieldInfo)) {\n                children.push(fieldChild);\n            }\n        });\n\n        return React.cloneElement(field, props, children.length === 1 ? children[0] : children);\n    }\n\n    onClick() {\n        const onClick = this.props.onClick;\n        if (_.isString(onClick) && onClick === 'toggleRowDetails') {\n            this.props.actions.toggleRowDetails(this.props.index)();\n        } else if (_.isFunction(onClick)) {\n            onClick.call(this, { data: this.data, $this: this });\n        }\n    }\n\n    render() {\n        if (this.props.render) {\n            return this.props.render.call(this);\n        }\n\n        if (this.props.onSelect && !this.selectRowElement) {\n            this.fields.splice(0, 0, <SelectRowField/>);\n        }\n\n        let classes = this.props.className;\n        if (_.isFunction(classes)) {\n            classes = classes(this.props.data);\n        }\n\n        return (\n            <tr className={classSet(classes, (this.props.selected && styles.selected))} onClick={this.onClick}>\n                {this.fields.map(this.renderField)}\n                {this.actionsElement ? <td className={this.props.actionsClass}>{this.actionsElement}</td> : null}\n            </tr>\n        );\n    }\n}\n\nRow.defaultProps = {\n    className: null,\n    onClick: _.noop,\n    disabled: false,\n    actionsClass: 'text-center'\n};\n\nexport default createComponent(Row, { styles });"]}