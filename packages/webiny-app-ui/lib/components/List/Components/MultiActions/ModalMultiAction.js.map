{"version":3,"sources":["../../../../../src/components/List/Components/MultiActions/ModalMultiAction.jsx"],"names":["ModalMultiAction","props","state","modal","render","call","hide","data","onAction","length","children","actions","dialog","Promise","resolve","setState","Link","dialogProps","onReady","show","onHidden","cloneElement","label","Component","defaultProps","modules"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;AAEA;;;;IAEMA,gB;;;AACF,8BAAYC,KAAZ,EAAmB;AAAA;;AAAA,sJACTA,KADS;;AAGf,cAAKC,KAAL,GAAa;AACTC,mBAAO;AADE,SAAb;AAHe;AAMlB;;;;iCAEQ;AAAA;;AACL,gBAAI,KAAKF,KAAL,CAAWG,MAAf,EAAuB;AACnB,uBAAO,KAAKH,KAAL,CAAWG,MAAX,CAAkBC,IAAlB,CAAuB,IAAvB,CAAP;AACH;;AAED,gBAAI,0BAAa,KAAKJ,KAAL,CAAWK,IAAxB,KAAiC,KAAKL,KAAL,CAAWK,IAAX,CAAgB,KAAKL,KAAL,CAAWM,IAA3B,CAArC,EAAuE;AACnE,uBAAO,IAAP;AACH;;AAED,gBAAMC,WAAW,SAAXA,QAAW,GAAM;AACnB,oBAAI,OAAKP,KAAL,CAAWM,IAAX,CAAgBE,MAApB,EAA4B;AACxB,wBAAMN,QAAQ,OAAKF,KAAL,CAAWS,QAAX,CAAoBL,IAApB,SAA+B;AACzCE,8BAAM,OAAKN,KAAL,CAAWM,IADwB;AAEzCI,iCAAS,OAAKV,KAAL,CAAWU,OAFqB;AAGzCC,gCAAQ;AACJN,kCAAM,gBAAM;AACR,oCAAI,OAAKM,MAAT,EAAiB;AACb,2CAAO,OAAKA,MAAL,CAAYN,IAAZ,EAAP;AACH;AACD,uCAAOO,QAAQC,OAAR,CAAgB,IAAhB,CAAP;AACH;AANG;AAHiC,qBAA/B,CAAd;AAYA,2BAAKC,QAAL,CAAc,EAAEZ,YAAF,EAAd;AACH;AACJ,aAhBD;;AATK,gBA2BGa,IA3BH,GA2BY,KAAKf,KA3BjB,CA2BGe,IA3BH;;;AA6BL,gBAAMC,cAAc;AAChBC,yBAAS,yBAAU;AACf,2BAAKN,MAAL,GAAcA,MAAd;AACAA,2BAAOO,IAAP;AACH,iBAJe;AAKhB;AACAC,0BAAU,oBAAM;AACZ,2BAAKR,MAAL,GAAc,IAAd;AACA,2BAAKG,QAAL,CAAc,EAAEZ,OAAO,IAAT,EAAd;AACH;AATe,aAApB;;AAYA,mBACI;AAAC,oBAAD;AAAA,kBAAM,SAASK,QAAf;AACK,qBAAKN,KAAL,CAAWC,KAAX,GAAmB,gBAAMkB,YAAN,CAAmB,KAAKnB,KAAL,CAAWC,KAA9B,EAAqCc,WAArC,CAAnB,GAAuE,IAD5E;AAEK,qBAAKhB,KAAL,CAAWqB;AAFhB,aADJ;AAMH;;;EAxD0B,gBAAMC,S;;AA2DrCvB,iBAAiBwB,YAAjB,GAAgC;AAC5Bb,aAAS,IADmB;AAE5BW,WAAO,IAFqB;AAG5Bf,UAAM,IAHsB;AAI5BD;AAJ4B,CAAhC;;kBAOe,gCAAgBN,gBAAhB,EAAkC,EAAEyB,SAAS,CAAC,MAAD,CAAX,EAAlC,C","file":"ModalMultiAction.js","sourcesContent":["import React from 'react';\nimport _ from 'lodash';\nimport { createComponent } from 'webiny-app';\n\nclass ModalMultiAction extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            modal: null\n        };\n    }\n\n    render() {\n        if (this.props.render) {\n            return this.props.render.call(this);\n        }\n\n        if (_.isFunction(this.props.hide) && this.props.hide(this.props.data)) {\n            return null;\n        }\n\n        const onAction = () => {\n            if (this.props.data.length) {\n                const modal = this.props.children.call(this, {\n                    data: this.props.data,\n                    actions: this.props.actions,\n                    dialog: {\n                        hide: () => {\n                            if (this.dialog) {\n                                return this.dialog.hide();\n                            }\n                            return Promise.resolve(true);\n                        }\n                    }\n                });\n                this.setState({ modal });\n            }\n        };\n\n        const { Link } = this.props;\n\n        const dialogProps = {\n            onReady: dialog => {\n                this.dialog = dialog;\n                dialog.show();\n            },\n            // `dialog` is passed from Component.js as `this` of the mounted dialog itself\n            onHidden: () => {\n                this.dialog = null;\n                this.setState({ modal: null });\n            }\n        };\n\n        return (\n            <Link onClick={onAction}>\n                {this.state.modal ? React.cloneElement(this.state.modal, dialogProps) : null}\n                {this.props.label}\n            </Link>\n        );\n    }\n}\n\nModalMultiAction.defaultProps = {\n    actions: null,\n    label: null,\n    data: null,\n    hide: _.noop\n};\n\nexport default createComponent(ModalMultiAction, { modules: ['Link'] });"]}