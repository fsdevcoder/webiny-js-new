{"version":3,"sources":["../../../../src/components/List/Components/StaticContainer.jsx"],"names":["StaticContainer","loadData","props","data","prepare","propsData","filters","fields","order","sorters","Object","keys","length","initialSorters","sort","field","push","meta","currentPage","page","perPage","totalCount","totalPages","Math","ceil","from","newState","list","slice","selectedRows","Promise","setState","resolve","Component","defaultProps","connectToRouter","layout","table","pagination"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;AAEA;;AACA;;;;;;AAEA;;IAEMA,e;;;;;;;;;;6CAEmB;AACjB,iBAAKC,QAAL,CAAc,KAAKC,KAAnB;AACH;;;;iHAE+BA,K;;;;;qCACxB,uBAAUA,MAAMC,IAAhB,EAAsB,KAAKD,KAAL,CAAWC,IAAjC,C;;;;;;;;;uCAGE,KAAKC,OAAL,CAAaF,KAAb,C;;;AACN,qCAAKD,QAAL,CAAcC,KAAd;;;;;;;;;;;;;;;;;;iCAGKA,K,EAAO;AAAA;;AACZ,gBAAMG,YAAY,mBAAMH,KAAN,EAAa,MAAb,EAAqB,KAAKA,KAAL,CAAWC,IAAhC,CAAlB;AACA,gBAAIA,OAAO,uBAAU,KAAKD,KAAL,CAAWI,OAArB,IAAgCD,SAAhC,GAA4C,sBAASA,SAAT,EAAoB,KAAKH,KAAL,CAAWI,OAA/B,CAAvD;AACA,gBAAMC,SAAS,EAAf;AACA,gBAAMC,QAAQ,EAAd;AACA,gBAAMC,UAAUC,OAAOC,IAAP,CAAY,KAAKT,KAAL,CAAWO,OAAvB,EAAgCG,MAAhC,GAAyC,KAAKV,KAAL,CAAWO,OAApD,GAA8D,KAAKP,KAAL,CAAWW,cAAzF;AACA,gCAAOJ,OAAP,EAAgB,UAACK,IAAD,EAAOC,KAAP,EAAiB;AAC7BR,uBAAOS,IAAP,CAAYD,KAAZ;AACAP,sBAAMQ,IAAN,CAAWF,SAAS,CAAT,GAAa,KAAb,GAAqB,MAAhC;AACH,aAHD;AAIAX,mBAAO,uBAAUA,IAAV,EAAgBI,MAAhB,EAAwBC,KAAxB,CAAP;;AAGA,gBAAMS,OAAO;AACTC,6BAAa,KAAKhB,KAAL,CAAWiB,IADf;AAETC,yBAAS,KAAKlB,KAAL,CAAWkB,OAFX;AAGTC,4BAAYlB,KAAKS,MAHR;AAITU,4BAAYC,KAAKC,IAAL,CAAUrB,KAAKS,MAAL,GAAc,KAAKV,KAAL,CAAWkB,OAAnC;AAJH,aAAb;;AAOA,iBAAKE,UAAL,GAAkBL,KAAKK,UAAvB;;AAEA,gBAAMG,OAAO,CAAC,KAAKvB,KAAL,CAAWiB,IAAX,GAAkB,CAAnB,IAAwB,KAAKjB,KAAL,CAAWkB,OAAhD;AACA,gBAAMM,WAAW,sBAAS;AACtBC,sBAAMxB,KAAKyB,KAAL,CAAWH,IAAX,EAAiBA,OAAO,KAAKvB,KAAL,CAAWkB,OAAnC,CADgB;AAEtBH,0BAFsB;AAGtBY,8BAAc;AAHQ,aAAT,CAAjB;;AAMA,mBAAO,IAAIC,OAAJ,CAAY;AAAA,uBAAW,OAAKC,QAAL,CAAcL,QAAd,EAAwBM,OAAxB,CAAX;AAAA,aAAZ,CAAP;AACH;;;EA5CyB,gBAAMC,S;;AA+CpCjC,gBAAgBkC,YAAhB,GAA+B;AAC3BC,qBAAiB,KADU;AAE3BhB,UAAM,CAFqB;AAG3BC,aAAS,EAHkB;AAI3BgB,UAJ2B,yBAIY;AAAA,YAA9B9B,OAA8B,SAA9BA,OAA8B;AAAA,YAArB+B,KAAqB,SAArBA,KAAqB;AAAA,YAAdC,UAAc,SAAdA,UAAc;;AACnC,eACI;AAAA;AAAA;AACKhC,mBADL;AAEK+B,iBAFL;AAGKC;AAHL,SADJ;AAOH;AAZ0B,CAA/B;;kBAee,gCAAgB,CAACtC,eAAD,0BAAhB,C","file":"StaticContainer.js","sourcesContent":["import React from 'react';\nimport _ from 'lodash';\nimport { createComponent } from 'webiny-app';\nimport BaseContainer from './BaseContainer';\n\n// TODO: not finished!\n\nclass StaticContainer extends React.Component {\n\n    componentWillMount() {\n        this.loadData(this.props);\n    }\n\n    async componentWillReceiveProps(props) {\n        if (_.isEqual(props.data, this.props.data)) {\n            return;\n        }\n        await this.prepare(props);\n        this.loadData(props);\n    }\n\n    loadData(props) {\n        const propsData = _.get(props, 'data', this.props.data);\n        let data = _.isEmpty(this.props.filters) ? propsData : _.filter(propsData, this.props.filters);\n        const fields = [];\n        const order = [];\n        const sorters = Object.keys(this.props.sorters).length ? this.props.sorters : this.props.initialSorters;\n        _.each(sorters, (sort, field) => {\n            fields.push(field);\n            order.push(sort === 1 ? 'asc' : 'desc');\n        });\n        data = _.orderBy(data, fields, order);\n\n\n        const meta = {\n            currentPage: this.props.page,\n            perPage: this.props.perPage,\n            totalCount: data.length,\n            totalPages: Math.ceil(data.length / this.props.perPage)\n        };\n\n        this.totalPages = meta.totalPages;\n\n        const from = (this.props.page - 1) * this.props.perPage;\n        const newState = _.assign({\n            list: data.slice(from, from + this.props.perPage),\n            meta,\n            selectedRows: []\n        });\n\n        return new Promise(resolve => this.setState(newState, resolve));\n    }\n}\n\nStaticContainer.defaultProps = {\n    connectToRouter: false,\n    page: 1,\n    perPage: 10,\n    layout({ filters, table, pagination }) {\n        return (\n            <webiny-list-layout>\n                {filters}\n                {table}\n                {pagination}\n            </webiny-list-layout>\n        );\n    }\n};\n\nexport default createComponent([StaticContainer, BaseContainer]);"]}