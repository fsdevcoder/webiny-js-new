{"version":3,"sources":["../../../src/components/Animate/index.js"],"names":["Container","props","state","shown","dom","hideAction","bind","showAction","callback","setState","elements","childNodes","hideCallback","e","onFinish","el","hide","custom","showCallback","show","ref","className","children","Component","Animate","childrenArray","Children","toArray","type","firstChild","trigger","defaultProps"],"mappings":"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","file":"index.js","sourcesContent":["import React from 'react';\nimport _ from 'lodash';\nimport AnimationSets from './AnimationSets';\nimport { TransitionGroup } from 'react-transition-group';\n\n/**\n * Only componentWillEnter and componentWillLeave can be used because they way ModalDialog component mounts into DOM.\n */\nclass Container extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = { shown: false };\n        this.dom = null;\n        this.hideAction = this.hideAction.bind(this);\n        this.showAction = this.showAction.bind(this);\n    }\n\n    componentWillEnter(callback) {\n        this.showAction(callback);\n    }\n\n    componentWillLeave(callback) {\n        this.hideAction(callback);\n    }\n\n    hideAction(callback) {\n        if (!this.state.shown) {\n            //callback();\n            return;\n        }\n        this.setState({ shown: false });\n\n        const elements = this.dom.childNodes;\n\n        const hideCallback = () => {\n            try {\n                callback();\n            } catch (e) {\n                // ignore\n            }\n\n            if (_.isFunction(this.props.onFinish)) {\n                this.props.onFinish();\n            }\n        };\n\n        _.forEach(elements, (el) => {\n            if (_.isObject(this.props.hide)) {\n                AnimationSets.custom(this.props.hide, el, hideCallback);\n            } else {\n                AnimationSets[this.props.hide](el, hideCallback);\n            }\n        });\n    }\n\n    showAction(callback) {\n        if (this.state.shown) {\n            return;\n        }\n        this.setState({ shown: true });\n\n        const elements = this.dom.childNodes;\n\n        const showCallback = () => {\n            callback();\n            if (_.isFunction(this.props.onFinish)) {\n                this.props.onFinish(true);\n            }\n        };\n\n        _.forEach(elements, (el) => {\n            if (_.isObject(this.props.show)) {\n                AnimationSets.custom(this.props.show, el, () => {\n                    try {\n                        callback();\n                    } catch (e) {\n                        // ignore\n                    }\n                    if (_.isFunction(this.props.onFinish)) {\n                        this.props.onFinish(true);\n                    }\n                });\n            } else {\n                AnimationSets[this.props.show](el, showCallback);\n            }\n        });\n    }\n\n    render() {\n        return <div ref={ref => this.dom = ref} className={this.props.className}>{this.props.children}</div>;\n    }\n}\n\n\nclass Animate extends React.Component {\n    firstChild(props) {\n        const childrenArray = React.Children.toArray(props.children);\n        return childrenArray[0].type || 'span';\n    }\n\n    render() {\n        return (\n            <TransitionGroup component={this.firstChild(this.props)}>\n                {(this.props.trigger === true) && (\n                    <Container\n                        onFinish={this.props.onFinish}\n                        show={this.props.show}\n                        hide={this.props.hide}\n                        className={this.props.className}>\n                        {this.props.children}\n                    </Container>\n                )}\n            </TransitionGroup>\n        );\n    }\n}\n\nAnimate.defaultProps = {\n    trigger: false,\n    onFinish: _.noop,\n    show: 'fadeIn',\n    hide: 'fadeOut'\n};\n\n\nexport default Animate;"]}