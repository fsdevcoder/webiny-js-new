{"version":3,"sources":["../../src/attributes/imagesAttribute.js"],"names":["ImagesAttribute","setProcessor","processor","setQuality","quality","setPresets","presets","getValue","values","prototype","call","map","value","getEntitiesClass","setValue"],"mappings":";;;;;;;;;;AAEA;;;;AACA;;AAEA;;;;;;AAGA,MAAMA,eAAN,kCAA6C;AACzCC,iBAAaC,SAAb,EAAwD;AACpD,aAAKA,SAAL,GAAiBA,SAAjB;AACA,eAAO,IAAP;AACH;;AAEDC,eAAWC,OAAX,EAA4C;AACxC,aAAKA,OAAL,GAAeA,OAAf;AACA,eAAO,IAAP;AACH;;AAEDC,eAAWC,UAAwB,EAAnC,EAA8C;AAC1C,aAAKA,OAAL,GAAeA,OAAf;;AAEA,eAAO,IAAP;AACH;;AAEKC,YAAN,GAAiB;AAAA;;AAAA;AACb,gBAAIC,SAAS,MAAM,yBAAeC,SAAf,CAAyBF,QAAzB,CAAkCG,IAAlC,OAAnB;AACAF,mBAAOG,GAAP,CAAW,iBAAS;AAChB,oBAAIC,iBAAiB,MAAKC,gBAAL,EAArB,EAA8C;AAC1CD,0BAAMX,YAAN,CAAmB,MAAKC,SAAxB;AACAU,0BAAMT,UAAN,CAAiB,MAAKC,OAAtB;AACAQ,0BAAMP,UAAN,CAAiB,MAAKC,OAAtB;AACH;AACJ,aAND;;AAQA,mBAAOE,MAAP;AAVa;AAWhB;;AAED;AACMM,YAAN,CAAeF,KAAf,EAAmE;AAAA;;AAAA;AAC/D,kBAAM,yBAAeH,SAAf,CAAyBK,QAAzB,CAAkCJ,IAAlC,SAA6CE,KAA7C,CAAN;AACA,kBAAMJ,SAAS,MAAM,OAAKD,QAAL,EAArB;;AAEAC,mBAAOG,GAAP,CAAW,iBAAS;AAChB,oBAAIC,iBAAiB,OAAKC,gBAAL,EAArB,EAA8C;AAC1CD,0BAAMP,UAAN,CAAiB,OAAKC,OAAtB;AACAM,0BAAMT,UAAN,CAAiB,OAAKC,OAAtB;AACAQ,0BAAMX,YAAN,CAAmB,OAAKC,SAAxB;AACH;AACJ,aAND;;AAQA;AAZ+D;AAalE;AA5CwC;;kBA+C9BF,e","file":"imagesAttribute.js","sourcesContent":["// @flow\nimport type { EntityCollection } from \"webiny-entity\";\nimport FilesAttribute from \"./filesAttribute\";\nimport { Image } from \"./../index\";\nimport type { ImageProcessor } from \"../../types\";\nimport ImageAttribute from \"./imageAttribute\";\nimport type { ImagePresets } from \"../entities/image.entity\";\n\nclass ImagesAttribute extends FilesAttribute {\n    setProcessor(processor: ImageProcessor): ImageAttribute {\n        this.processor = processor;\n        return this;\n    }\n\n    setQuality(quality: number): ImageAttribute {\n        this.quality = quality;\n        return this;\n    }\n\n    setPresets(presets: ImagePresets = {}): Image {\n        this.presets = presets;\n\n        return this;\n    }\n\n    async getValue() {\n        let values = await FilesAttribute.prototype.getValue.call(this);\n        values.map(value => {\n            if (value instanceof this.getEntitiesClass()) {\n                value.setProcessor(this.processor);\n                value.setQuality(this.quality);\n                value.setPresets(this.presets);\n            }\n        });\n\n        return values;\n    }\n\n    // $FlowIgnore\n    async setValue(value: Array<{}> | EntityCollection): Promise<void> {\n        await FilesAttribute.prototype.setValue.call(this, value);\n        const values = await this.getValue();\n\n        values.map(value => {\n            if (value instanceof this.getEntitiesClass()) {\n                value.setPresets(this.presets);\n                value.setQuality(this.quality);\n                value.setProcessor(this.processor);\n            }\n        });\n\n        return this;\n    }\n}\n\nexport default ImagesAttribute;\n"]}