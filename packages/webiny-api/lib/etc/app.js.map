{"version":3,"sources":["../../src/etc/app.js"],"names":["App","constructor","name","endpoints","endpointExtensions","entityExtensions","getEndpoints","extendEndpoint","id","cb","callbacks","push","extendEntity","applyEndpointExtensions","endpoint","classId","map","api","getApi","applyEntityExtensions","entity","wildcardCallbacks"],"mappings":";;;;;AAOA,MAAMA,GAAN,CAAU;;AAMNC,gBAAYC,IAAZ,EAA0B;AACtB,aAAKA,IAAL,GAAYA,IAAZ;AACA,aAAKC,SAAL,GAAiB,EAAjB;AACA,aAAKC,kBAAL,GAA0B,EAA1B;AACA,aAAKC,gBAAL,GAAwB,EAAxB;AACH;;AAEDC,mBAAuC;AACnC,eAAO,KAAKH,SAAZ;AACH;;AAEDI,mBAAeC,EAAf,EAA2BC,EAA3B,EAA0D;AACtD,cAAMC,YAAY,KAAKN,kBAAL,CAAwBI,EAAxB,KAA+B,EAAjD;AACAE,kBAAUC,IAAV,CAAeF,EAAf;AACA,aAAKL,kBAAL,CAAwBI,EAAxB,IAA8BE,SAA9B;AACH;;AAEDE,iBAAaJ,EAAb,EAAyBC,EAAzB,EAAsD;AAClD,cAAMC,YAAY,KAAKL,gBAAL,CAAsBG,EAAtB,KAA6B,EAA/C;AACAE,kBAAUC,IAAV,CAAeF,EAAf;AACA,aAAKJ,gBAAL,CAAsBG,EAAtB,IAA4BE,SAA5B;AACH;;AAEDG,4BAAwBC,QAAxB,EAA4C;AACxC,cAAMN,KAAKM,SAASb,WAAT,CAAqBc,OAAhC;AACA,cAAML,YAAY,KAAKN,kBAAL,CAAwBI,EAAxB,KAA+B,EAAjD;AACAE,kBAAUM,GAAV,CAAcP,MAAMA,GAAG,EAAED,EAAF,EAAMM,QAAN,EAAgBG,KAAKH,SAASI,MAAT,EAArB,EAAH,CAApB;AACH;;AAEDC,0BAAsBC,MAAtB,EAAsC;AAClC,cAAMZ,KAAKY,OAAOnB,WAAP,CAAmBc,OAA9B;AACA,cAAMM,oBAAoB,KAAKhB,gBAAL,CAAsB,GAAtB,KAA8B,EAAxD;AACA,cAAMK,YAAY,KAAKL,gBAAL,CAAsBG,EAAtB,KAA6B,EAA/C;AACAa,0BAAkBL,GAAlB,CAAsBP,MAAMA,GAAGW,MAAH,CAA5B;AACAV,kBAAUM,GAAV,CAAcP,MAAMA,GAAGW,MAAH,CAApB;AACH;AAzCK;;kBA4CKpB,G","file":"app.js","sourcesContent":["// @flow\nimport type { Endpoint, ApiContainer } from \"./../endpoint\";\nimport type { Entity } from \"./../\";\n\ntype EndpointExtensionCallback = ({ id: string, api: ApiContainer }) => void;\ntype EntityExtensionCallback = ({ id: string, entity: Entity }) => void;\n\nclass App {\n    name: string;\n    endpoints: Array<Class<Endpoint>>;\n    endpointExtensions: { [key: string]: Array<EndpointExtensionCallback> };\n    entityExtensions: { [key: string]: Array<EntityExtensionCallback> };\n\n    constructor(name: string) {\n        this.name = name;\n        this.endpoints = [];\n        this.endpointExtensions = {};\n        this.entityExtensions = {};\n    }\n\n    getEndpoints(): Array<Class<Endpoint>> {\n        return this.endpoints;\n    }\n\n    extendEndpoint(id: string, cb: EndpointExtensionCallback) {\n        const callbacks = this.endpointExtensions[id] || [];\n        callbacks.push(cb);\n        this.endpointExtensions[id] = callbacks;\n    }\n\n    extendEntity(id: string, cb: EntityExtensionCallback) {\n        const callbacks = this.entityExtensions[id] || [];\n        callbacks.push(cb);\n        this.entityExtensions[id] = callbacks;\n    }\n\n    applyEndpointExtensions(endpoint: Endpoint) {\n        const id = endpoint.constructor.classId;\n        const callbacks = this.endpointExtensions[id] || [];\n        callbacks.map(cb => cb({ id, endpoint, api: endpoint.getApi() }));\n    }\n\n    applyEntityExtensions(entity: Entity) {\n        const id = entity.constructor.classId;\n        const wildcardCallbacks = this.entityExtensions[\"*\"] || [];\n        const callbacks = this.entityExtensions[id] || [];\n        wildcardCallbacks.map(cb => cb(entity));\n        callbacks.map(cb => cb(entity));\n    }\n}\n\nexport default App;\n"]}