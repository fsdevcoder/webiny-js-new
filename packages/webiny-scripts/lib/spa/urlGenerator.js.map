{"version":3,"sources":["../../src/spa/urlGenerator.js"],"names":["UrlGenerator","constructor","rules","setRules","generate","file","prefix","each","rule","regex","RegExp","test","domain","trimStart"],"mappings":";;;;;;AAAA;;;;;;AAEA;;;;;;;;;;;;;;;;;AAiBA,MAAMA,YAAN,CAAmB;AACfC,kBAAc;AACV,aAAKC,KAAL,GAAa,EAAb;AACH;;AAEDC,aAASD,KAAT,EAAgB;AACZ,aAAKA,KAAL,GAAaA,KAAb;AACH;;AAEDE,aAASC,IAAT,EAAeC,SAAS,GAAxB,EAA6B;AACzB,yBAAEC,IAAF,CAAO,KAAKL,KAAZ,EAAmBM,QAAQ;AACvB,kBAAMC,QAAQ,IAAIC,MAAJ,CAAWF,KAAKG,IAAhB,CAAd;AACA,gBAAIF,MAAME,IAAN,CAAWN,IAAX,CAAJ,EAAsB;AAClBC,yBAASE,KAAKI,MAAL,GAAcN,MAAvB;AACA,uBAAO,KAAP;AACH;AACJ,SAND;;AAQA,eAAOA,SAAS,iBAAEO,SAAF,CAAYR,IAAZ,EAAkB,GAAlB,CAAhB;AACH;AAnBc;;kBAsBJL,Y","file":"urlGenerator.js","sourcesContent":["import _ from \"lodash\";\n\n/**\n * Generate URL using given Array<{test: RegEx, domain: string}> set of rules.\n * This is useful when you want your production assets to be served form different domains\n * for different assets - to speed up your page load time.\n *\n * Example:\n * [\n *   {test: '^fonts\\/', domain: 'http://fonts.domain.com/'},\n *   {test: '^chunks\\/', domain: 'http://chunks.domain.com/'},\n *   {test: 'images\\/', domain: 'http://images.domain.com/'},\n *   {test: '\\.js$', domain: 'http://js.domain.com/'},\n *   {test: '\\.css$', domain: 'http://css.domain.com/'}\n * ]\n *\n * @param assetRules\n * @return {string}\n */\nclass UrlGenerator {\n    constructor() {\n        this.rules = {};\n    }\n\n    setRules(rules) {\n        this.rules = rules;\n    }\n\n    generate(file, prefix = \"/\") {\n        _.each(this.rules, rule => {\n            const regex = new RegExp(rule.test);\n            if (regex.test(file)) {\n                prefix = rule.domain + prefix;\n                return false;\n            }\n        });\n\n        return prefix + _.trimStart(file, \"/\");\n    }\n}\n\nexport default UrlGenerator;\n"]}