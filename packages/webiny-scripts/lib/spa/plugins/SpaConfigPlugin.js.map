{"version":3,"sources":["../../../src/spa/plugins/SpaConfigPlugin.js"],"names":["SpaConfigPlugin","constructor","options","apply","compiler","plugin","compilation","htmlPluginData","callback","chunksManifest","JSON","parse","assets","source","chunks","config","html","replace"],"mappings":";;;;;;;;;;;;AAAA,MAAMA,eAAN,CAAsB;AAClBC,gBAAYC,OAAZ,EAAqB;AACjB,aAAKA,OAAL,GAAeA,OAAf;AACH;;AAEDC,UAAMC,QAAN,EAAgB;AACZA,iBAASC,MAAT,CAAgB,aAAhB,EAA+BC,eAAe;AAC1CA,wBAAYD,MAAZ,CACI,4CADJ,EAEI,CAACE,cAAD,EAAiBC,QAAjB,KAA8B;AAC1B,sBAAMC,iBAAiBC,KAAKC,KAAL,CAAWL,YAAYM,MAAZ,CAAmB,WAAnB,EAAgCC,MAAhC,EAAX,EAClBC,MADL;;AAGA,sBAAMC,SAAU;;mDAEe,yBAAeN,cAAf,CAA+B;;;iBAF9D;AAMAF,+BAAeS,IAAf,GAAsBT,eAAeS,IAAf,CAAoBC,OAApB,CAA4B,SAA5B,EAAuCF,MAAvC,CAAtB;AACAP,yBAAS,IAAT,EAAeD,cAAf;AACH,aAdL;AAgBH,SAjBD;AAkBH;AAxBiB;;kBA2BPP,e","file":"SpaConfigPlugin.js","sourcesContent":["class SpaConfigPlugin {\n    constructor(options) {\n        this.options = options;\n    }\n\n    apply(compiler) {\n        compiler.plugin(\"compilation\", compilation => {\n            compilation.plugin(\n                \"html-webpack-plugin-before-html-processing\",\n                (htmlPluginData, callback) => {\n                    const chunksManifest = JSON.parse(compilation.assets[\"meta.json\"].source())\n                        .chunks;\n\n                    const config = `\n                    <script type=\"text/javascript\"> \n                        window.webpackManifest = ${JSON.stringify(chunksManifest)};\n                    </script>\n                    </body>\n                `;\n                    htmlPluginData.html = htmlPluginData.html.replace(\"</body>\", config);\n                    callback(null, htmlPluginData);\n                }\n            );\n        });\n    }\n}\n\nexport default SpaConfigPlugin;\n"]}