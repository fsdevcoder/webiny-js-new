{"version":3,"sources":["../../../../src/spa/loaders/hot-accept-loader/index.js"],"names":["hotAcceptLoader","regex","files","source","m","res","parse","resource","exec","ip","trim","push","join","dir","includes","name"],"mappings":";;;;;kBAMwBA,e;;AANxB;;;;AACA;;;;;;AAEA,MAAMC,QAAQ,kBAAd;AACA,MAAMC,QAAQ,EAAd;;AAEe,SAASF,eAAT,CAAyBG,MAAzB,EAAiC;AAC5C,QAAIC,CAAJ;AACA,UAAMC,MAAM,eAAKC,KAAL,CAAW,KAAKC,QAAhB,CAAZ;;AAEA,OAAG;AACCH,YAAIH,MAAMO,IAAN,CAAWL,MAAX,CAAJ;AACA,YAAIC,CAAJ,EAAO;AACH,gBAAIK,KAAKL,EAAE,CAAF,CAAT;AACAK,iBAAK,iBAAEC,IAAF,CAAOD,EAAP,EAAW,GAAX,CAAL;AACAA,iBAAK,iBAAEC,IAAF,CAAOD,EAAP,EAAW,GAAX,CAAL;;AAEAP,kBAAMS,IAAN,CAAW,eAAKC,IAAL,CAAUP,IAAIQ,GAAd,EAAmBJ,EAAnB,CAAX;AACH;AACJ,KATD,QASSL,CATT;;AAWA,QAAIF,MAAMY,QAAN,CAAe,eAAKF,IAAL,CAAUP,IAAIQ,GAAd,EAAmBR,IAAIU,IAAvB,CAAf,CAAJ,EAAkD;AAC9CZ,kBAAU,+BAAV;AACH;;AAED,WAAOA,MAAP;AACH","file":"index.js","sourcesContent":["import _ from \"lodash\";\nimport path from \"path\";\n\nconst regex = /import\\((.+?)\\)/g;\nconst files = [];\n\nexport default function hotAcceptLoader(source) {\n    let m;\n    const res = path.parse(this.resource);\n\n    do {\n        m = regex.exec(source);\n        if (m) {\n            let ip = m[1];\n            ip = _.trim(ip, \"'\");\n            ip = _.trim(ip, '\"');\n\n            files.push(path.join(res.dir, ip));\n        }\n    } while (m);\n\n    if (files.includes(path.join(res.dir, res.name))) {\n        source += \"\\nmodule.hot.accept(() => {})\";\n    }\n\n    return source;\n}\n"]}