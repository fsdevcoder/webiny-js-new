{"version":3,"sources":["../src/index.js"],"names":["projectRoot","appRoot","UrlGenerator","interopModule","urlGenerator","server","sync","cwd","baseWebpack","appWebpack","config","browserSync","developApp","webpack","run","err","stats","console","error","log","toString","colors","buildApp","serveApp","m","default","spa","appEntry","SpaConfigPlugin"],"mappings":";;;;;;;;;;;;;;;;+CAYO,WAA0BA,WAA1B,EAAuCC,OAAvC,EAAgD;AACnD,cAAMC,eAAeC,eAAc,qDAAa,oBAAb,EAAd,EAArB;AACA,cAAMC,eAAe,IAAIF,YAAJ,EAArB;;AAEA,cAAMG,SAASF,eAAc,wDAAa,iBAAOG,IAAP,CAAY,CAAC,WAAD,CAAZ,EAA2B,EAAEC,KAAKN,OAAP,EAA3B,CAAb,IAAd,EAAf;AACA,cAAMO,cAAcL,eAAc,qDAAa,sBAAb,EAAd,GAAoD;AACpEH,uBADoE;AAEpEC,mBAFoE;AAGpEG;AAHoE,SAApD,CAApB;;AAMA,cAAMK,aAAaN,eACf,wDAAa,iBAAOG,IAAP,CAAY,CAAC,mBAAD,CAAZ,EAAmC,EAAEC,KAAKN,OAAP,EAAnC,CAAb,IADe,GAEjB;AACEG,wBADF;AAEEM,oBAAQF;AAFV,SAFiB,CAAnB;;AAOA,cAAMG,cAAc,MAAMN,MAA1B;AACAM,oBAAY,EAAED,QAAQD,UAAV,EAAsBT,WAAtB,EAAmCC,OAAnC,EAAZ;AACH,K;;oBApBqBW,U;;;;;;gDAsBf,WAAwBZ,WAAxB,EAAqCC,OAArC,EAA8C;AACjD,cAAMC,eAAeC,eAAc,qDAAa,oBAAb,EAAd,EAArB;AACA,cAAMC,eAAe,IAAIF,YAAJ,EAArB;;AAEA,cAAMM,cAAcL,eAAc,qDAAa,sBAAb,EAAd,GAAoD;AACpEH,uBADoE;AAEpEC,mBAFoE;AAGpEG;AAHoE,SAApD,CAApB;;AAMA,cAAMK,aAAaN,eACf,wDAAa,iBAAOG,IAAP,CAAY,CAAC,mBAAD,CAAZ,EAAmC,EAAEC,KAAKN,OAAP,EAAnC,CAAb,IADe,GAEjB;AACES,oBAAQF,WADV;AAEEJ;AAFF,SAFiB,CAAnB;;AAOA,cAAMS,UAAU,qDAAa,SAAb,EAAhB;AACAA,gBAAQJ,UAAR,EAAoBK,GAApB,CAAwB,UAASC,GAAT,EAAcC,KAAd,EAAqB;AACzC,gBAAID,GAAJ,EAASE,QAAQC,KAAR,CAAcH,GAAd;;AAETE,oBAAQE,GAAR,CAAYH,MAAMI,QAAN,CAAe,EAAEC,QAAQ,IAAV,EAAf,CAAZ;AACH,SAJD;AAKH,K;;oBAvBqBC,Q;;;;;;gDAyBf,WAAwBtB,WAAxB,EAAqCC,OAArC,EAA8C;AACjD,cAAMI,SAASF,eAAc,wDAAa,iBAAOG,IAAP,CAAY,CAAC,WAAD,CAAZ,EAA2B,EAAEC,KAAKN,OAAP,EAA3B,CAAb,IAAd,EAAf;AACAI,eAAO,EAAEL,WAAF,EAAeC,OAAf,EAAP;AACH,K;;oBAHqBsB,Q;;;;;AA3DtB;;;;AAEA;;;;AAEA,MAAMpB,gBAAgBqB,KAAMA,EAAEC,OAAF,GAAYD,EAAEC,OAAd,GAAwBD,CAApD;;AAEO,MAAME,oBAAM;AACfC,2BADe;AAEfC,yCAFe;AAGfvB;AAHe,CAAZ","file":"index.js","sourcesContent":["import findUp from \"find-up\";\n\nimport { appEntry, SpaConfigPlugin, server } from \"./spa\";\n\nconst interopModule = m => (m.default ? m.default : m);\n\nexport const spa = {\n    appEntry,\n    SpaConfigPlugin,\n    server\n};\n\nexport async function developApp(projectRoot, appRoot) {\n    const UrlGenerator = interopModule(await import(\"./spa/urlGenerator\"));\n    const urlGenerator = new UrlGenerator();\n\n    const server = interopModule(await import(findUp.sync([\"server.js\"], { cwd: appRoot })));\n    const baseWebpack = interopModule(await import(\"./spa/webpack.config\"))({\n        projectRoot,\n        appRoot,\n        urlGenerator\n    });\n\n    const appWebpack = interopModule(\n        await import(findUp.sync([\"webpack.config.js\"], { cwd: appRoot }))\n    )({\n        urlGenerator,\n        config: baseWebpack\n    });\n\n    const browserSync = await server;\n    browserSync({ config: appWebpack, projectRoot, appRoot });\n}\n\nexport async function buildApp(projectRoot, appRoot) {\n    const UrlGenerator = interopModule(await import(\"./spa/urlGenerator\"));\n    const urlGenerator = new UrlGenerator();\n\n    const baseWebpack = interopModule(await import(\"./spa/webpack.config\"))({\n        projectRoot,\n        appRoot,\n        urlGenerator\n    });\n\n    const appWebpack = interopModule(\n        await import(findUp.sync([\"webpack.config.js\"], { cwd: appRoot }))\n    )({\n        config: baseWebpack,\n        urlGenerator\n    });\n\n    const webpack = await import(\"webpack\");\n    webpack(appWebpack).run(function(err, stats) {\n        if (err) console.error(err);\n\n        console.log(stats.toString({ colors: true }));\n    });\n}\n\nexport async function serveApp(projectRoot, appRoot) {\n    const server = interopModule(await import(findUp.sync([\"server.js\"], { cwd: appRoot })));\n    server({ projectRoot, appRoot });\n}\n"]}